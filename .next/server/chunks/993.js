exports.id=993,exports.ids=[993],exports.modules={9855:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},2673:(e,r,t)=>{Promise.resolve().then(t.bind(t,4755))},7546:(e,r,t)=>{Promise.resolve().then(t.bind(t,3828))},3828:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>O});var s=t(5344),a=t(3729),n=t(8428),i=t(5750),l=t(6506),o=t(8822),c=t(5390),d=t(2273),u=t(8120),h=t(1453);function m(){let e=(0,n.usePathname)(),[r,t]=(0,a.useState)(null),[m,f]=(0,a.useState)(!0),[x,p]=(0,a.useState)(!1),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{(0,i.ts)().then(t).finally(()=>f(!1))},[]),(0,a.useEffect)(()=>{if(!x)return;let e=e=>{b.current&&!b.current.contains(e.target)&&p(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[x]);let g=async()=>{p(!1),await (0,i.w7)()},w="/login"===e;return m?s.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 animate-pulse","aria-hidden":!0}):r?(0,s.jsxs)("div",{className:"relative",ref:b,children:[(0,s.jsxs)("button",{type:"button",onClick:()=>p(e=>!e),className:(0,h.cn)("flex items-center gap-2 rounded-xl px-2 py-2 md:pl-3 md:pr-3 border border-slate-200 bg-white hover:bg-slate-50 transition-colors","focus:outline-none focus:ring-2 focus:ring-agrix-forest focus:ring-offset-2"),"aria-expanded":x,"aria-haspopup":"true",children:[s.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-agrix-forest text-white font-bold text-sm",children:s.jsx(o.Z,{className:"h-5 w-5"})}),s.jsx("span",{className:"hidden md:inline text-sm font-bold text-slate-800 truncate max-w-[8rem]",children:r.email?.split("@")[0]||"マイページ"}),s.jsx(c.Z,{className:(0,h.cn)("h-4 w-4 text-slate-500 transition-transform",x&&"rotate-180")})]}),x&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-56 rounded-xl border border-slate-200 bg-white shadow-lg py-1 z-50",role:"menu",children:[(0,s.jsxs)("div",{className:"px-3 py-2 border-b border-slate-100",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"ログイン中"}),s.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:r.email})]}),(0,s.jsxs)(l.default,{href:(r.role,"/mypage"),onClick:()=>p(!1),className:"flex items-center gap-2 px-3 py-2.5 text-sm font-medium text-slate-700 hover:bg-slate-50",role:"menuitem",children:[s.jsx(d.Z,{className:"h-4 w-4 text-agrix-forest"}),"マイページ"]}),(0,s.jsxs)("button",{type:"button",onClick:g,className:"flex w-full items-center gap-2 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50",role:"menuitem",children:[s.jsx(u.Z,{className:"h-4 w-4"}),"ログアウト"]})]})]}):s.jsx(l.default,{href:w?"/":"/login",className:(0,h.cn)("inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2.5 text-sm font-bold transition-colors","bg-agrix-forest text-white hover:bg-agrix-forest-dark shadow-sm"),children:w?"トップへ":"ログイン"})}function f(){return s.jsx("header",{className:"bg-dashboard-card border-b border-dashboard-border sticky top-0 z-50 shadow-sm",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center",children:[s.jsx("div",{className:"flex-1 min-w-0","aria-hidden":!0}),s.jsx(m,{})]})})}var x=t(6135),p=t(7121),b=t(6810),g=t(7126),w=t(5794),v=t(4243),j=t(1917),y=t(1700),N=t(5366);function Z(e){let r=[{href:"admin"===e||"provider"===e?"/admin":"/",label:"ダッシュボード",icon:d.Z}];return"farmer"===e&&(r.push({href:"/requests",label:"作業依頼",icon:x.Z}),r.push({href:"/#applications",label:"申込履歴",icon:p.Z}),r.push({href:"/my-fields",label:"My畑",icon:b.Z})),"provider"===e&&(r.push({href:"/admin/campaigns/new",label:"案件作成",icon:g.Z}),r.push({href:"/provider/calendar",label:"カレンダー",icon:w.Z}),r.push({href:"/provider/reports/new",label:"実績報告",icon:p.Z}),r.push({href:"/provider/billings",label:"請求管理",icon:v.Z}),r.push({href:"/admin/masters",label:"マスタ",icon:j.Z}),r.push({href:"/admin/users",label:"紐付き農家",icon:y.Z})),"admin"===e&&(r.push({href:"/admin/users",label:"ユーザー承認",icon:N.Z}),r.push({href:"/admin/masters",label:"マスタ",icon:j.Z})),r}function k({user:e,className:r}){let t=(0,n.usePathname)(),a=Z(e.role);return s.jsx("aside",{className:(0,h.cn)("hidden md:flex flex-col w-64 shrink-0 bg-agrix-forest border-r border-white/10",r),children:s.jsx("nav",{className:"flex-1 p-3 pt-5 space-y-1 overflow-y-auto",children:a.map(e=>{let r=e.icon,a=t===e.href||"/"!==e.href&&t.startsWith(e.href);return(0,s.jsxs)(l.default,{href:e.href,className:(0,h.cn)("flex items-center gap-3 rounded-xl px-3 py-3 text-sm font-bold transition-colors",a?"bg-white/20 text-white shadow-inner":"text-white/90 hover:bg-white/10 hover:text-white"),children:[s.jsx(r,{className:"h-5 w-5 shrink-0"}),e.label]},e.href)})})})}function P({user:e,className:r}){let t=(0,n.usePathname)(),a=Z(e.role).slice(0,5);return s.jsx("nav",{className:(0,h.cn)("fixed bottom-0 left-0 right-0 z-40 md:hidden border-t border-white/10 bg-agrix-forest safe-area-pb",r),children:s.jsx("div",{className:"flex items-center justify-around h-16 safe-area-pb",children:a.map(e=>{let r=e.icon,a=t===e.href||"/"!==e.href&&t.startsWith(e.href);return(0,s.jsxs)(l.default,{href:e.href,className:(0,h.cn)("flex flex-col items-center justify-center gap-1 flex-1 min-w-0 py-3 text-xs font-bold transition-colors min-h-[44px]",a?"text-white bg-white/20":"text-white/80 hover:text-white hover:bg-white/10"),children:[s.jsx(r,{className:(0,h.cn)("h-6 w-6 shrink-0",a&&"stroke-[2.5]")}),s.jsx("span",{className:"truncate max-w-[4.5rem]",children:e.label})]},e.href)})})})}let I=["/login","/auth"];function O({children:e}){let r=(0,n.usePathname)(),[t,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(0,i.ts)().then(l).finally(()=>c(!1))},[]);let d=I.some(e=>r===e||r.startsWith(e+"/")),u=!d&&t&&"/"!==r;return d?s.jsx(s.Fragment,{children:e}):(0,s.jsxs)("div",{className:(0,h.cn)("min-h-screen",!d&&"dashboard-app bg-dashboard-bg"),children:[s.jsx(f,{}),(0,s.jsxs)("div",{className:"flex min-h-[calc(100vh-4rem)]",children:[u&&t&&s.jsx(k,{user:t}),s.jsx("main",{className:(0,h.cn)("flex-1 w-full min-h-[calc(100vh-4rem)] overflow-auto",u&&"pb-20 md:pb-0 md:px-6 md:py-6"),children:e})]}),u&&t&&s.jsx(P,{user:t})]})}},5750:(e,r,t)=>{"use strict";t.d(r,{Lj:()=>i,gQ:()=>l,ts:()=>a,w7:()=>n});var s=t(8704);async function a(){try{let{data:{session:e}}=await s.O.auth.getSession();if(!e)return null;let{data:r,error:t}=await s.O.from("users").select("*").eq("email",e.user.email).single();if(t||!r)return null;return r}catch(e){return console.error("Error getting current user:",e),null}}async function n(){await s.O.auth.signOut(),window.location.href="/login"}async function i(e){try{let{data:{session:r}}=await s.O.auth.getSession();if(!r?.user?.email)return{success:!1,error:"ログインしていません"};let{error:t}=await s.O.from("users").update({...void 0!==e.name&&{name:e.name},...void 0!==e.phone&&{phone:e.phone},...void 0!==e.address&&{address:e.address}}).eq("email",r.user.email);if(t)return{success:!1,error:t.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function l(e){try{let{error:r}=await s.O.auth.updateUser({password:e});if(r)return{success:!1,error:r.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}},8704:(e,r,t)=>{"use strict";t.d(r,{O:()=>s});let s=(0,t(5645).createBrowserClient)("https://ayvieorwnyxxfygbhzny.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5dmllb3J3bnl4eGZ5Z2Joem55Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4MjY1OTUsImV4cCI6MjA4NjQwMjU5NX0.-alPp1Cr1J2yoKcdaln4LMbOPjaGCb4wRjURGhibLPk")},1453:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(6815),a=t(9377);function n(...e){return(0,a.m6)((0,s.W)(e))}},2485:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(5036);let a=(0,t(6843).createProxy)(String.raw`C:\Users\yusuk\Documents\wwx\Wayfinder AgriX\v3-app\src\components\AppLayout.tsx`),{__esModule:n,$$typeof:i}=a,l=a.default;function o({children:e}){return s.jsx(l,{children:e})}},1342:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d,metadata:()=>c});var s=t(5036),a=t(2574),n=t.n(a),i=t(2255),l=t.n(i);t(5023);var o=t(7171);let c={title:"Wayfinder AgriX Drone - ドローンあいのり予約",description:"Wayfinder AgriX Drone - 農家と業者をつなぐ農作業予約プラットフォーム"};function d({children:e}){return s.jsx("html",{lang:"ja",children:(0,s.jsxs)("body",{className:`${l().variable} ${n().variable} font-sans antialiased tracking-tight`,children:[e,s.jsx(o.x7,{position:"top-center",richColors:!0,closeButton:!0})]})})}},3881:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};