(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},3211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var a=s(482),r=s(9108),l=s(2563),n=s.n(l),i=s(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1136)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,7858)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5011:(e,t,s)=>{Promise.resolve().then(s.bind(s,4030))},5299:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5794:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2739:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},508:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7273:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(3267),r=s.n(a)},3267:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=s(9694);s(5344),s(3729);let r=a._(s(546));function l(e,t){let s={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};return"function"==typeof e&&(s.loader=e),(0,r.default)({...s,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8354:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=s(3689);function r(e){let{reason:t,children:s}=e;throw new a.BailoutToCSRError(t)}},546:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let a=s(5344),r=s(3729),l=s(8354);function n(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},s=(0,r.lazy)(()=>t.loader().then(n)),d=t.loading;function c(e){let n=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsx)(s,{...e}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(r.Suspense,{fallback:n,children:i})}return c.displayName="LoadableComponent",c}},4030:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(5344),r=s(3729),l=s(7273),n=s(6506),i=s(8428),d=s(2739),c=s(9224);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,c.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var x=s(5794),m=s(5299),u=s(508),p=s(7121);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,c.Z)("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);var f=s(4755),g=s(4133),j=s(8732),b=s(5750);let y=(0,l.default)(async()=>{},{loadableGenerated:{modules:["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\page.tsx -> @/components/PolygonMap"]},ssr:!1,loading:()=>a.jsx("div",{className:"w-full h-full bg-slate-100 animate-pulse rounded-2xl flex items-center justify-center text-slate-400",children:"地図を読み込み中..."})}),w=(0,l.default)(async()=>{},{loadableGenerated:{modules:["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\page.tsx -> @/components/CampaignForm"]},ssr:!1});function N(){let e=(0,i.useRouter)(),[t,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[N,v]=(0,r.useState)(null),[_,k]=(0,r.useState)([]),[P,Z]=(0,r.useState)(!0),[M,S]=(0,r.useState)(0),[q,C]=(0,r.useState)(null),[A,D]=(0,r.useState)(null),[E,O]=(0,r.useState)(0),[z,G]=(0,r.useState)([]);(0,r.useEffect)(()=>{(0,b.ts)().then(e=>{s(e??null),c(!1)})},[]),(0,r.useEffect)(()=>{if(!l&&t&&("admin"===t.role||"provider"===t.role)){e.replace("/admin");return}},[t,l,e]),(0,r.useEffect)(()=>{l||t||(0,j.v2)().then(k).finally(()=>Z(!1))},[l,t]),(0,r.useEffect)(()=>{if(l||!t||"farmer"!==t.role)return;let e=!1;return Z(!0),Promise.all([(0,j.g8)(),t.id?(0,j.ss)(t.id):Promise.resolve([])]).then(([t,s])=>{e||(v(t),G(s),t&&(0,j.x1)(t.id).then(t=>{e||O(t)}),Z(!1))}),()=>{e=!0}},[l,t]);let X=async e=>{if(!N||!q){f.toast.error("案件情報または圃場データが不足しています");return}let s={base_price:N.base_price||0,min_price:N.min_price||0,target_area_10r:N.target_area_10r||0,min_target_area_10r:N.min_target_area_10r,max_target_area_10r:N.max_target_area_10r,execution_price:N.execution_price},a=E+M,r=(0,g.Bx)(s,a).currentPrice??N.base_price??0,l={campaign_id:N.id,farmer_id:t?.role==="farmer"&&t?.id?t.id:void 0,farmer_name:e.farmerName,phone:e.phone,email:e.email,desired_start_date:e.desiredStartDate,desired_end_date:e.desiredEndDate,field_polygon:q,area_10r:M,locked_price:r},n=await (0,j.TB)(l);n.success?(f.toast.success(`予約が完了しました。予約ID: ${n.bookingId}`),S(0),C(null),D(null),t?.id&&(0,j.ss)(t.id).then(G),window.location.reload()):f.toast.error(n.error||"予約に失敗しました")};if(l)return a.jsx("main",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(d.Z,{className:"w-10 h-10 text-green-600 animate-spin"}),a.jsx("p",{className:"text-slate-600 font-medium",children:"読み込み中..."})]})});if(t&&("admin"===t.role||"provider"===t.role))return a.jsx("main",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(d.Z,{className:"w-10 h-10 text-green-600 animate-spin"}),a.jsx("p",{className:"text-slate-600 font-medium",children:"ダッシュボードへ移動中..."})]})});if(!t)return a.jsx("main",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-green-50/30",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[(0,a.jsxs)("section",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-800 mb-3",children:a.jsx("span",{className:"text-[#16a34a]",children:"Wayfinder AgriX"})}),a.jsx("p",{className:"text-slate-600 font-medium max-w-xl mx-auto",children:"農家と業者をつなぐドローン農作業予約プラットフォーム。圃場を指定して簡単に申し込みできます。"}),(0,a.jsxs)(n.default,{href:"/login",className:"inline-flex items-center gap-2 mt-6 bg-[#16a34a] text-white px-6 py-3 rounded-2xl font-bold shadow-sm hover:opacity-90 transition-opacity",children:[a.jsx(o,{className:"w-5 h-5"}),"ログイン / 新規登録"]})]}),(0,a.jsxs)("section",{id:"campaigns",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5 text-[#16a34a]"}),"公開案件一覧"]}),P?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(d.Z,{className:"w-8 h-8 text-slate-400 animate-spin"})}):0===_.length?a.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 text-center text-slate-500",children:"現在募集中の案件はありません。"}):a.jsx("ul",{className:"space-y-3",children:_.map(e=>(0,a.jsxs)("li",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-200 flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold text-slate-800",children:e.campaign_title||e.location}),a.jsx("p",{className:"text-sm text-slate-500",children:e.start_date&&e.end_date?`${e.start_date} ～ ${e.end_date}`:e.location})]}),(0,a.jsxs)(n.default,{href:"/login",className:"inline-flex items-center gap-1 text-sm font-bold text-[#16a34a] hover:underline shrink-0",children:["申し込む ",a.jsx(m.Z,{className:"w-4 h-4"})]})]},e.id))})]})]})});if("farmer"!==t.role)return null;if(P&&!N)return a.jsx("main",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(d.Z,{className:"w-10 h-10 text-green-600 animate-spin"}),a.jsx("p",{className:"text-slate-600 font-medium",children:"読み込み中..."})]})});let W={confirmed:"確定",pending:"確認待ち",completed:"完了",canceled:"キャンセル"};return a.jsx("main",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-green-50/30",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8",children:[N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5 text-[#16a34a]"}),a.jsx("p",{className:"text-slate-700 font-bold",children:"募集中の案件"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200 flex items-center gap-1",children:[a.jsx(u.Z,{className:"w-4 h-4 text-blue-600"}),(0,a.jsxs)("span",{className:"text-blue-700 font-bold text-xs",children:["累計: ",E.toFixed(1)," 反"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-green-50 px-4 py-2 rounded-full border border-green-200",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-700 font-bold text-sm",children:"募集中"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12",children:[a.jsx("section",{className:"order-2 lg:order-1",children:(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-200 h-[500px] lg:h-[700px] relative",children:[(0,a.jsxs)("div",{className:"absolute top-6 left-6 z-[1000] bg-white/95 backdrop-blur px-4 py-2 rounded-xl shadow-md border border-slate-200 flex items-center gap-2",children:[a.jsx(u.Z,{className:"w-5 h-5 text-[#16a34a]"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-sm font-bold text-slate-600",children:"圃場を描画"}),a.jsx("p",{className:"text-xs text-slate-500",children:"地図上でクリックして圃場の範囲を指定"})]})]}),M>0&&(0,a.jsxs)("div",{className:"absolute top-6 right-6 z-[1000] bg-[#16a34a] text-white px-5 py-3 rounded-xl shadow-sm border-2 border-green-500 min-w-[180px]",children:[a.jsx("div",{className:"text-xs font-bold uppercase tracking-wider mb-1 opacity-90",children:"選択面積"}),(0,a.jsxs)("div",{className:"text-3xl font-black",children:[M.toFixed(2)," ",a.jsx("span",{className:"text-sm font-normal opacity-90",children:"反"})]})]}),a.jsx("div",{className:"w-full h-full rounded-xl overflow-hidden",children:a.jsx(y,{onPolygonComplete:(e,t,s)=>{D(e),S(t),C(s)},initialPolygon:A||void 0})})]})}),a.jsx("section",{className:"order-1 lg:order-2",children:a.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:a.jsx(w,{project:N,area10r:M,totalCampaignArea:E,onSubmit:X})})})]})]}):(0,a.jsxs)("div",{className:"mb-8 p-6 bg-white rounded-2xl shadow-sm border border-slate-200 text-center",children:[a.jsx(u.Z,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium",children:"現在募集中の案件はありません"})]}),(0,a.jsxs)("section",{id:"applications",className:"mb-10",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[a.jsx(p.Z,{className:"w-5 h-5 text-[#16a34a]"}),"申込履歴"]}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:0===z.length?a.jsx("div",{className:"p-6 text-center text-slate-500 text-sm",children:"まだ申込がありません。"}):a.jsx("ul",{className:"divide-y divide-slate-100",children:z.map(e=>a.jsx("li",{className:"p-4 flex flex-wrap items-center justify-between gap-2",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold text-slate-800",children:e.project?.campaign_title||e.project?.location||e.campaign_id}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[e.area_10r," 反",null!=e.locked_price&&` \xb7 \xa5${(e.area_10r*e.locked_price).toLocaleString()}`," \xb7 ",W[e.status]||e.status,e.created_at&&` \xb7 ${new Date(e.created_at).toLocaleDateString("ja-JP")}`]})]})},e.id))})})]}),(0,a.jsxs)("section",{id:"my-field",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5 text-[#16a34a]"}),"My畑管理"]}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 text-center",children:a.jsx("p",{className:"text-slate-500 text-sm",children:"圃場情報の登録・管理は今後提供予定です。"})})]}),a.jsx("footer",{className:"mt-8 text-center text-sm text-slate-500",children:a.jsx("p",{children:"ご不明な点がございましたら、お気軽にお問い合わせください。"})})]})})}},1136:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let a=(0,s(6843).createProxy)(String.raw`C:\Users\yusuk\Documents\wwx\Wayfinder AgriX\v3-app\src\app\page.tsx`),{__esModule:r,$$typeof:l}=a,n=a.default}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,45,337,968,103],()=>s(3211));module.exports=a})();