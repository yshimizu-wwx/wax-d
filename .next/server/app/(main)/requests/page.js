(()=>{var e={};e.id=419,e.ids=[419],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},2115:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var r=s(482),a=s(9108),i=s(2563),n=s.n(i),l=s(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["(main)",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2145)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\requests\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2485)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\requests\\page.tsx"],u="/(main)/requests/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/requests/page",pathname:"/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9649:(e,t,s)=>{Promise.resolve().then(s.bind(s,8538))},2739:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8538:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(5344),a=s(3729),i=s(8428),n=s(6135),l=s(7121),d=s(4755),o=s(5750),c=s(8732),u=s(658),m=s(3673),x=s(5190),p=s(6540),h=s(7361);function f({farmerId:e,onSubmit:t,onCancel:s}){let[i,n]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[u,f]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[y,_]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[k,P]=(0,a.useState)(""),[q,C]=(0,a.useState)(!1),S=async s=>{s.preventDefault(),C(!0);try{await t({farmer_id:e,location:i||void 0,crop_name_free_text:l||void 0,task_category_free_text:o||void 0,task_detail_free_text:u||void 0,desired_start_date:g||void 0,desired_end_date:b||void 0,estimated_area_10r:y?Number(y):void 0,desired_price:N?Number(N):void 0,notes:k||void 0}),n(""),d(""),c(""),f(""),v(""),j(""),_(""),w(""),P("")}finally{C(!1)}};return r.jsx(m.Zb,{children:r.jsx(m.aY,{className:"p-6",children:(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"location",children:"依頼場所・地域"}),r.jsx(p.I,{id:"location",value:i,onChange:e=>n(e.target.value),placeholder:"例: 〇〇県〇〇市",className:"mt-1"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"crop",children:"作物名"}),r.jsx(p.I,{id:"crop",value:l,onChange:e=>d(e.target.value),placeholder:"例: 水稲",className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"taskCategory",children:"作業カテゴリ"}),r.jsx(p.I,{id:"taskCategory",value:o,onChange:e=>c(e.target.value),placeholder:"例: 防除",className:"mt-1"})]})]}),(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"taskDetail",children:"作業内容（詳細）"}),r.jsx(p.I,{id:"taskDetail",value:u,onChange:e=>f(e.target.value),placeholder:"例: ドローン散布",className:"mt-1"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"desiredStartDate",children:"希望開始日"}),r.jsx(p.I,{id:"desiredStartDate",type:"date",value:g,onChange:e=>v(e.target.value),className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"desiredEndDate",children:"希望終了日"}),r.jsx(p.I,{id:"desiredEndDate",type:"date",value:b,onChange:e=>j(e.target.value),className:"mt-1"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"estimatedArea",children:"想定面積（反）"}),r.jsx(p.I,{id:"estimatedArea",type:"number",min:"0",step:"0.1",value:y,onChange:e=>_(e.target.value),placeholder:"例: 10",className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"desiredPrice",children:"希望予算（円）"}),r.jsx(p.I,{id:"desiredPrice",type:"number",min:"0",value:N,onChange:e=>w(e.target.value),placeholder:"例: 150000",className:"mt-1"})]})]}),(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"notes",children:"備考"}),r.jsx("textarea",{id:"notes",value:k,onChange:e=>P(e.target.value),placeholder:"業者への連絡事項など",className:"mt-1 w-full min-h-[80px] rounded-lg border border-dashboard-border bg-dashboard-card px-3 py-2 text-sm text-dashboard-text focus:outline-none focus:ring-2 focus:ring-agrix-forest"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[r.jsx(x.z,{type:"submit",disabled:q,className:"bg-agrix-forest hover:bg-agrix-forest-dark",children:q?"送信中...":"作業を依頼する"}),s&&r.jsx(x.z,{type:"button",variant:"outline",onClick:s,children:"キャンセル"})]})]})})})}let g={pending:"依頼中",converted:"案件化済み",rejected:"お断り"};function v(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(null),[x,p]=(0,a.useState)(!0),[h,v]=(0,a.useState)([]);(0,a.useEffect)(()=>{(0,o.ts)().then(e=>{s(e??null),p(!1)})},[]),(0,a.useEffect)(()=>{t&&"farmer"===t.role&&(0,c.xW)(t.id).then(v)},[t]),(0,a.useEffect)(()=>{!x&&t&&"farmer"!==t.role&&e.replace("/")},[t,x,e]);let b=async e=>{if(!t||"farmer"!==t.role)return;let s=await (0,c.xC)(e);if(s.success)d.toast.success("作業依頼を送信しました"),(0,c.xW)(t.id).then(v);else throw d.toast.error(s.error||"送信に失敗しました"),Error(s.error)};return x?r.jsx("main",{className:"min-h-full flex items-center justify-center",children:r.jsx(u.Z,{message:"読み込み中..."})}):t&&"farmer"===t.role?r.jsx("main",{className:"min-h-full",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8",children:[(0,r.jsxs)("h1",{className:"text-xl font-bold text-dashboard-text mb-2 flex items-center gap-2",children:[r.jsx(n.Z,{className:"w-6 h-6 text-agrix-forest"}),"作業依頼"]}),r.jsx("p",{className:"text-sm text-dashboard-muted mb-6",children:"業者に作業を依頼し、案件として募集してもらうための依頼を送信できます。"}),(0,r.jsxs)("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-lg font-bold text-dashboard-text mb-4",children:"新規依頼"}),r.jsx(f,{farmerId:t.id,onSubmit:b})]}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("h2",{className:"text-lg font-bold text-dashboard-text mb-4 flex items-center gap-2",children:[r.jsx(l.Z,{className:"w-5 h-5 text-agrix-forest"}),"依頼一覧"]}),r.jsx(m.Zb,{className:"overflow-hidden",children:0===h.length?r.jsx(m.aY,{className:"p-10 text-center text-dashboard-muted",children:"まだ依頼がありません。上記フォームから依頼を送信してください。"}):r.jsx("ul",{className:"divide-y divide-dashboard-border",children:h.map(e=>r.jsx("li",{className:"p-4",children:r.jsx("div",{className:"flex flex-wrap items-start justify-between gap-2",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-dashboard-text",children:[e.crop_name_free_text||e.crop_name||"（作物未指定）",e.task_detail_free_text||e.task_detail_name?` \xb7 ${e.task_detail_free_text||e.task_detail_name}`:""]}),(0,r.jsxs)("p",{className:"text-sm text-dashboard-muted",children:[e.location&&`${e.location} \xb7 `,"希望: ",e.desired_start_date||"未定"," ～ ",e.desired_end_date||"未定",null!=e.estimated_area_10r&&` \xb7 ${e.estimated_area_10r} 反`,null!=e.desired_price&&` \xb7 \xa5${Number(e.desired_price).toLocaleString()}`]}),(0,r.jsxs)("p",{className:"text-xs text-dashboard-muted mt-1",children:[e.created_at&&new Date(e.created_at).toLocaleString("ja-JP")," \xb7 ",r.jsx("span",{className:"converted"===e.status?"text-agrix-forest font-medium":"rejected"===e.status?"text-red-600":"",children:g[e.status]||e.status})]})]})})},e.id))})})]})]})}):r.jsx("main",{className:"min-h-full flex items-center justify-center",children:r.jsx(u.Z,{message:"リダイレクト中..."})})}},658:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(5344),a=s(2739),i=s(1453);function n({message:e="読み込み中...",className:t}){return(0,r.jsxs)("div",{className:(0,i.cn)("flex min-h-[40vh] flex-col items-center justify-center gap-4",t),children:[r.jsx(a.Z,{className:"h-12 w-12 text-agrix-forest animate-spin","aria-hidden":!0}),r.jsx("p",{className:"text-sm font-medium text-slate-600",children:e})]})}},5190:(e,t,s)=>{"use strict";s.d(t,{z:()=>m});var r,a,i=s(5344),n=s(3729),l=s(6815);let d=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,o=l.W;var c=s(1453);let u=(r="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-bold tracking-tight transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:size-4 [&_svg]:shrink-0",a={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",accent:"bg-accent text-accent-foreground hover:bg-accent/80 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary bg-transparent text-primary hover:bg-primary/10",secondary:"bg-muted text-muted-foreground hover:bg-muted/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10","icon-sm":"h-8 w-8","icon-lg":"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==a?void 0:a.variants)==null)return o(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:s,defaultVariants:i}=a,n=Object.keys(s).map(t=>{let r=null==e?void 0:e[t],a=null==i?void 0:i[t];if(null===r)return null;let n=d(r)||d(a);return s[t][n]}),l=e&&Object.entries(e).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return o(r,n,null==a?void 0:null===(t=a.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...l}[t]):({...i,...l})[t]===s})?[...e,s,r]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),m=n.forwardRef(({className:e,variant:t,size:s,...r},a)=>i.jsx("button",{className:(0,c.cn)(u({variant:t,size:s,className:e})),ref:a,...r}));m.displayName="Button"},6540:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(5344),a=s(3729),i=s(1453);let n=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-11 w-full rounded-lg border border-border bg-card px-4 py-2 text-sm font-medium text-foreground ring-offset-background transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:border-primary","disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},7361:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var r=s(5344),a=s(3729),i=s(1453);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("label",{ref:s,className:(0,i.cn)("block text-sm font-bold text-foreground leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));n.displayName="Label"},2145:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`C:\Users\yusuk\Documents\wwx\Wayfinder AgriX\v3-app\src\app\(main)\requests\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,240,337,859,232,164,993,534],()=>s(2115));module.exports=r})();