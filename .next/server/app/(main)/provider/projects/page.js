(()=>{var e={};e.id=852,e.ids=[852],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},1678:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(482),a=s(9108),i=s(2563),n=s.n(i),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(main)",{children:["provider",{children:["projects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,677)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\provider\\projects\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2485)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\provider\\projects\\page.tsx"],u="/(main)/provider/projects/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/provider/projects/page",pathname:"/provider/projects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},161:(e,t,s)=>{Promise.resolve().then(s.bind(s,9948))},3897:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]])},5794:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4290:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7751:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7189:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8134:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]])},7126:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},9948:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5344),a=s(3729),i=s(8428),n=s(6506),l=s(8134),o=s(7189),d=s(5794),c=s(4290),u=s(9388),x=s(7126),p=s(7751),m=s(3897),h=s(5750),f=s(8704),y=s(7083),g=s(4755),b=s(3673),v=s(5190),k=s(1453);let j=[{key:"draft",label:"作成",statuses:["unformed"],icon:l.Z},{key:"recruiting",label:"募集",statuses:["open","applied"],icon:o.Z},{key:"closed",label:"締切",statuses:["closed"],icon:d.Z},{key:"confirmed",label:"確定",statuses:["completed","archived"],icon:c.Z}];function w(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[c,w]=(0,a.useState)([]),[N,_]=(0,a.useState)("recruiting"),[Z,P]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let t=await (0,h.ts)();if(!t||"provider"!==t.role){e.replace("/login");return}s(t);let{data:r,error:a}=await f.O.from("campaigns").select("id, campaign_title, location, status, final_date, start_date, end_date, is_closed").eq("provider_id",t.id).order("created_at",{ascending:!1});if(a){g.toast.error("案件一覧の取得に失敗しました"),d(!1);return}w(r??[]),d(!1)})()},[e]);let C=e=>{let t=j.find(t=>t.key===e);return t?c.filter(e=>t.statuses.includes(e.status)):[]},q=async e=>{P(e);let t=await (0,y.dm)(e);P(null),t.success?(g.toast.success("募集を締め切りました"),w(t=>t.map(t=>t.id===e?{...t,status:"closed",is_closed:!0}:t))):g.toast.error(t.error??"締切に失敗しました")},z=async e=>{P(e);let t=await (0,y.Bp)(e);P(null),t.success?(g.toast.success("日付を確定しました"),w(t=>t.map(t=>t.id===e?{...t,status:"completed"}:t))):g.toast.error(t.error??"確定に失敗しました")};if(o||!t)return r.jsx("main",{className:"min-h-full flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-agrix-forest"})});let A=C(N);return r.jsx("main",{className:"min-h-full",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 md:py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6",children:[(0,r.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-dashboard-text flex items-center gap-2",children:[r.jsx(u.Z,{className:"w-6 h-6 text-agrix-forest"}),"案件"]}),r.jsx(n.default,{href:"/admin/campaigns/new",children:(0,r.jsxs)(v.z,{className:"gap-2 bg-agrix-forest hover:bg-agrix-forest-dark",children:[r.jsx(x.Z,{className:"w-4 h-4"}),"新規作成"]})})]}),r.jsx("div",{className:"flex border-b border-dashboard-border mb-6 overflow-x-auto",children:j.map(e=>{let t=e.icon,s=C(e.key).length;return(0,r.jsxs)("button",{type:"button",onClick:()=>_(e.key),className:(0,k.cn)("flex items-center gap-2 px-4 py-3 text-sm font-bold whitespace-nowrap border-b-2 transition-colors",N===e.key?"border-agrix-forest text-agrix-forest":"border-transparent text-dashboard-muted hover:text-dashboard-text"),children:[r.jsx(t,{className:"w-4 h-4 shrink-0"}),e.label,(0,r.jsxs)("span",{className:"tabular-nums text-xs font-normal opacity-80",children:["(",s,")"]})]},e.key)})}),(0,r.jsxs)(b.Zb,{children:[r.jsx(b.Ol,{className:"pb-2",children:r.jsx(b.ll,{className:"text-base flex items-center gap-2",children:(()=>{let e=j.find(e=>e.key===N),t=e?.icon??l.Z;return(0,r.jsxs)(r.Fragment,{children:[r.jsx(t,{className:"w-5 h-5 text-agrix-forest"}),e?.label??N]})})()})}),r.jsx(b.aY,{children:0===A.length?(0,r.jsxs)("div",{className:"py-12 text-center text-dashboard-muted",children:[r.jsx("p",{className:"font-medium mb-1",children:"このステップの案件はありません"}),"draft"===N&&r.jsx(n.default,{href:"/admin/campaigns/new",children:(0,r.jsxs)(v.z,{variant:"outline",size:"sm",className:"mt-2 gap-2",children:[r.jsx(x.Z,{className:"w-4 h-4"}),"案件を作成"]})})]}):r.jsx("ul",{className:"divide-y divide-dashboard-border",children:A.map(e=>(0,r.jsxs)("li",{className:"py-4 flex flex-wrap items-center justify-between gap-3",children:[(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-bold text-dashboard-text",children:e.campaign_title||e.location||"（無題）"}),(0,r.jsxs)("p",{className:"text-sm text-dashboard-muted mt-0.5",children:[e.final_date||e.start_date||e.end_date?new Date(e.final_date||e.start_date||e.end_date||"").toLocaleDateString("ja-JP"):"日付未定"," \xb7 ",e.location]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:["recruiting"===N&&("open"===e.status||"applied"===e.status)&&r.jsx(v.z,{size:"sm",variant:"outline",className:"border-agrix-gold/50 text-agrix-gold-dark hover:bg-agrix-gold/20",disabled:!!Z,onClick:()=>q(e.id),children:Z===e.id?"処理中...":"募集締切"}),"closed"===N&&"closed"===e.status&&r.jsx(v.z,{size:"sm",className:"bg-agrix-forest hover:bg-agrix-forest-dark",disabled:!!Z,onClick:()=>z(e.id),children:Z===e.id?"処理中...":"日付確定"}),(0,r.jsxs)(n.default,{href:"/provider/calendar",className:"inline-flex items-center gap-1 text-sm font-bold text-agrix-forest hover:underline",children:["カレンダー ",r.jsx(p.Z,{className:"w-4 h-4"})]})]})]},e.id))})})]}),r.jsx("div",{className:"mt-6 flex flex-wrap gap-3",children:(0,r.jsxs)(n.default,{href:"/admin",className:"inline-flex items-center gap-2 text-sm font-medium text-dashboard-muted hover:text-dashboard-text",children:[r.jsx(m.Z,{className:"w-4 h-4"}),"ダッシュボードへ"]})})]})})}},5190:(e,t,s)=>{"use strict";s.d(t,{z:()=>x});var r,a,i=s(5344),n=s(3729),l=s(6815);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,d=l.W;var c=s(1453);let u=(r="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-bold tracking-tight transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:size-4 [&_svg]:shrink-0",a={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",accent:"bg-accent text-accent-foreground hover:bg-accent/80 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary bg-transparent text-primary hover:bg-primary/10",secondary:"bg-muted text-muted-foreground hover:bg-muted/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10","icon-sm":"h-8 w-8","icon-lg":"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==a?void 0:a.variants)==null)return d(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:s,defaultVariants:i}=a,n=Object.keys(s).map(t=>{let r=null==e?void 0:e[t],a=null==i?void 0:i[t];if(null===r)return null;let n=o(r)||o(a);return s[t][n]}),l=e&&Object.entries(e).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return d(r,n,null==a?void 0:null===(t=a.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...l}[t]):({...i,...l})[t]===s})?[...e,s,r]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),x=n.forwardRef(({className:e,variant:t,size:s,...r},a)=>i.jsx("button",{className:(0,c.cn)(u({variant:t,size:s,className:e})),ref:a,...r}));x.displayName="Button"},677:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`C:\Users\yusuk\Documents\wwx\Wayfinder AgriX\v3-app\src\app\(main)\provider\projects\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,240,337,859,804,236,993,764],()=>s(1678));module.exports=r})();