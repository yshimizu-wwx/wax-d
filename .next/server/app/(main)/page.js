(()=>{var e={};e.id=974,e.ids=[974],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},1609:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=r(482),s=r(9108),n=r(2563),l=r.n(n),i=r(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(main)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8455)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2485)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1342)),"C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\page.tsx"],u="/(main)/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2327:(e,t,r)=>{Promise.resolve().then(r.bind(r,1324))},5299:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(9224).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2739:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(9224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2810:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(9224).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(9224).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7273:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(3267),s=r.n(a)},3267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=r(9694);r(5344),r(3729);let s=a._(r(546));function n(e,t){let r={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};return"function"==typeof e&&(r.loader=e),(0,s.default)({...r,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=r(3689);function s(e){let{reason:t,children:r}=e;throw new a.BailoutToCSRError(t)}},546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(5344),s=r(3729),n=r(8354);function l(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},r=(0,s.lazy)(()=>t.loader().then(l)),o=t.loading;function d(e){let l=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsx)(r,{...e}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(s.Suspense,{fallback:l,children:i})}return d.displayName="LoadableComponent",d}},1324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var a=r(5344),s=r(3729),n=r.t(s,2),l=r(7273),i=r(6506),o=r(8428),d=r(2810),c=r(5794),u=r(2739),x=r(5299),m=r(508),p=r(7121),f=r(6810),h=r(4755),g=r(4133),b=r(8732),j=r(5750),v=r(5190),y=r(3673);r(1202);var N=r(1405),_=Symbol.for("react.lazy"),w=n[" use ".trim().toString()];function P(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===_&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var k=Symbol("radix.slottable");function Z(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===k}var S=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:r,...a}=e;if(P(r)&&"function"==typeof w&&(r=w(r._payload)),s.isValidElement(r)){var n;let e,l;let i=(n=r,(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let a in t){let s=e[a],n=t[a];/^on[A-Z]/.test(a)?s&&n?r[a]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...n}:"className"===a&&(r[a]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==s.Fragment&&(o.ref=t?(0,N.F)(t,i):i),s.cloneElement(r,o)}return s.Children.count(r)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=s.forwardRef((e,r)=>{let{children:n,...l}=e;P(n)&&"function"==typeof w&&(n=w(n._payload));let i=s.Children.toArray(n),o=i.find(Z);if(o){let e=o.props.children,n=i.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...l,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null})}return(0,a.jsx)(t,{...l,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),n=s.forwardRef((e,s)=>{let{asChild:n,...l}=e,i=n?r:t;return(0,a.jsx)(i,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),A="Progress",[C,$]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>s.createContext(e));return function(r){let a=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return n.scopeName=e,[function(t,n){let l=s.createContext(n);l.displayName=t+"Context";let i=r.length;r=[...r,n];let o=t=>{let{scope:r,children:n,...o}=t,d=r?.[e]?.[i]||l,c=s.useMemo(()=>o,Object.values(o));return(0,a.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(r,a){let o=a?.[e]?.[i]||l,d=s.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(n,...t)]}(A),[M,E]=C(A),D=s.forwardRef((e,t)=>{var r,s;let{__scopeProgress:n,value:l=null,max:i,getValueLabel:o=q,...d}=e;(i||0===i)&&!X(i)&&console.error((r=`${i}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=X(i)?i:100;null===l||F(l,c)||console.error((s=`${l}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=F(l,c)?l:null,x=z(u)?o(u,c):void 0;return(0,a.jsx)(M,{scope:n,value:u,max:c,children:(0,a.jsx)(S.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":z(u)?u:void 0,"aria-valuetext":x,role:"progressbar","data-state":W(u,c),"data-value":u??void 0,"data-max":c,...d,ref:t})})});D.displayName=A;var O="ProgressIndicator",R=s.forwardRef((e,t)=>{let{__scopeProgress:r,...s}=e,n=E(O,r);return(0,a.jsx)(S.div,{"data-state":W(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:t})});function q(e,t){return`${Math.round(e/t*100)}%`}function W(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function z(e){return"number"==typeof e}function X(e){return z(e)&&!isNaN(e)&&e>0}function F(e,t){return z(e)&&!isNaN(e)&&e<=t&&e>=0}R.displayName=O;var B=r(1453);let G=s.forwardRef(({className:e,value:t,indicatorClassName:r,...s},n)=>a.jsx(D,{ref:n,className:(0,B.cn)("relative h-3 w-full overflow-hidden rounded-full bg-slate-200",e),...s,children:a.jsx(R,{className:(0,B.cn)("h-full w-full flex-1 bg-agrix-forest transition-all duration-500 ease-out","data-[state=complete]:bg-agrix-gold",r),style:{transform:`translateX(-${100-(t??0)}%)`}})}));function I({result:e,currentPrice:t,label:r="逆オークション進捗",detail:n,className:l}){let[i,o]=(0,s.useState)(e.progress),[d,c]=(0,s.useState)(t);(0,s.useEffect)(()=>{o(e.progress)},[e.progress]),(0,s.useEffect)(()=>{t!==d&&c(t)},[t,d]);let u=Math.round(100*i);return(0,a.jsxs)("div",{className:(0,B.cn)("space-y-2",l),children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"font-medium text-slate-600",children:r}),n&&a.jsx("span",{className:"text-slate-500",children:n})]}),a.jsx(G,{value:u,className:"h-3"}),(0,a.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,a.jsxs)("span",{className:"text-xs text-slate-500",children:[u,"%"]}),null!=t&&(0,a.jsxs)("span",{className:"text-lg font-bold text-agrix-forest animate-price-pulse tabular-nums",children:["\xa5",t.toLocaleString(),a.jsx("span",{className:"text-xs font-normal text-slate-500 ml-1",children:"/10a"})]},t),e.isUnformed&&a.jsx("span",{className:"text-xs font-medium text-amber-600",children:"最低成立面積に達していません"})]})]})}function U({campaign:e,onSelect:t,isSelected:r,className:s}){let n=e.totalArea10r??0,l={base_price:e.base_price||0,min_price:e.min_price||0,target_area_10r:e.target_area_10r||0,min_target_area_10r:e.min_target_area_10r,max_target_area_10r:e.max_target_area_10r,execution_price:e.execution_price},i=(0,g.Bx)(l,n);return e.max_target_area_10r||e.target_area_10r,a.jsx(y.Zb,{className:(0,B.cn)("transition-all border-2",r?"border-agrix-forest ring-2 ring-agrix-forest/20":"hover:border-agrix-forest/50",s),children:a.jsx(y.aY,{className:"p-5",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-bold text-dashboard-text text-base leading-tight",children:e.campaign_title||e.location||"案件"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm text-dashboard-muted",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{className:"h-4 w-4 text-agrix-forest"}),e.location]}),e.start_date&&e.end_date&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(c.Z,{className:"h-4 w-4 text-agrix-forest"}),e.start_date," ～ ",e.end_date]})]})]}),a.jsx(I,{result:i,currentPrice:i.currentPrice,detail:i.remainingArea>0?`残り ${i.remainingArea.toFixed(1)} 反で目標`:"目標達成"}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-dashboard-muted",children:["申込合計: ",n.toFixed(1)," 反"]}),a.jsx(v.z,{size:"sm",onClick:()=>t(e),className:"shrink-0",children:"申し込む"})]})]})})})}G.displayName=D.displayName;var L=r(658);let Y=(0,l.default)(async()=>{},{loadableGenerated:{modules:["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\page.tsx -> @/components/PolygonMap"]},ssr:!1,loading:()=>a.jsx("div",{className:"w-full h-full bg-dashboard-card animate-pulse rounded-2xl flex items-center justify-center text-dashboard-muted",children:"地図を読み込み中..."})}),T=(0,l.default)(async()=>{},{loadableGenerated:{modules:["C:\\Users\\yusuk\\Documents\\wwx\\Wayfinder AgriX\\v3-app\\src\\app\\(main)\\page.tsx -> @/components/CampaignForm"]},ssr:!1});function V(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)(null),[n,l]=(0,s.useState)(!0),[v,N]=(0,s.useState)([]),[_,w]=(0,s.useState)([]),[P,k]=(0,s.useState)(null),[Z,S]=(0,s.useState)(!0),[A,C]=(0,s.useState)(0),[$,M]=(0,s.useState)(null),[E,D]=(0,s.useState)(null),[O,R]=(0,s.useState)([]);(0,s.useEffect)(()=>{(0,j.ts)().then(e=>{r(e??null),l(!1)})},[]),(0,s.useEffect)(()=>{if(!n&&t&&("admin"===t.role||"provider"===t.role)){e.replace("/admin");return}},[t,n,e]),(0,s.useEffect)(()=>{n||t||(0,b.v2)().then(N).finally(()=>S(!1))},[n,t]),(0,s.useEffect)(()=>{if(n||!t||"farmer"!==t.role)return;let e=!1;return S(!0),(0,b.v2)().then(t=>{if(!e)return Promise.all(t.map(e=>(0,b.x1)(e.id).then(t=>({...e,totalArea10r:t}))))}).then(t=>{!e&&t&&(w(t),k(e=>{let r=t[0]??null;return e?t.find(t=>t.id===e.id)??r:r}))}).finally(()=>{e||S(!1)}),t.id&&(0,b.ss)(t.id).then(t=>{e||R(t)}),()=>{e=!0}},[n,t]);let q=P?.totalArea10r??0,W=async e=>{if(!P||!$){h.toast.error("案件情報または圃場データが不足しています");return}let r={base_price:P.base_price||0,min_price:P.min_price||0,target_area_10r:P.target_area_10r||0,min_target_area_10r:P.min_target_area_10r,max_target_area_10r:P.max_target_area_10r,execution_price:P.execution_price},a=q+A,s=(0,g.Bx)(r,a).currentPrice??P.base_price??0,n={campaign_id:P.id,farmer_id:t?.role==="farmer"&&t?.id?t.id:void 0,farmer_name:e.farmerName,phone:e.phone,email:e.email,desired_start_date:e.desiredStartDate,desired_end_date:e.desiredEndDate,field_polygon:$,area_10r:A,locked_price:s},l=await (0,b.TB)(n);l.success?(h.toast.success(`予約が完了しました。予約ID: ${l.bookingId}`),C(0),M(null),D(null),t?.id&&(0,b.ss)(t.id).then(R),w(e=>e.map(e=>e.id===P.id?{...e,totalArea10r:(e.totalArea10r??0)+A}:e)),k(e=>e?.id===P.id?{...e,totalArea10r:(e.totalArea10r??0)+A}:e)):h.toast.error(l.error||"予約に失敗しました")};if(n)return a.jsx("main",{className:"min-h-full flex items-center justify-center",children:a.jsx(L.Z,{message:"読み込み中..."})});if(t&&("admin"===t.role||"provider"===t.role))return a.jsx("main",{className:"min-h-full flex items-center justify-center",children:a.jsx(L.Z,{message:"ダッシュボードへ移動中..."})});if(!t)return a.jsx("main",{className:"min-h-full",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[(0,a.jsxs)("section",{className:"text-center mb-10",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-black text-dashboard-text mb-2",children:a.jsx("span",{className:"text-agrix-forest",children:"Wayfinder AgriX Drone"})}),a.jsx("p",{className:"text-dashboard-muted font-medium max-w-xl mx-auto text-base",children:"農家と業者をつなぐドローン農作業予約プラットフォーム。圃場を指定して簡単に申し込みできます。"}),(0,a.jsxs)(i.default,{href:"/login",className:"inline-flex items-center gap-2 mt-6 bg-agrix-forest text-white px-6 py-3 rounded-2xl font-bold shadow-sm hover:bg-agrix-forest-light transition-colors",children:[a.jsx(d.Z,{className:"w-5 h-5"}),"ログイン / 新規登録"]})]}),(0,a.jsxs)("section",{id:"campaigns",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-dashboard-text mb-4 flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-5 h-5 text-agrix-forest"}),"公開案件一覧"]}),Z?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(u.Z,{className:"w-8 h-8 text-dashboard-muted animate-spin"})}):0===v.length?a.jsx(y.Zb,{children:a.jsx(y.aY,{className:"p-8 text-center text-dashboard-muted",children:"現在募集中の案件はありません。"})}):a.jsx("ul",{className:"space-y-3",children:v.map(e=>a.jsx("li",{children:a.jsx(y.Zb,{children:(0,a.jsxs)(y.aY,{className:"p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold text-dashboard-text",children:e.campaign_title||e.location}),a.jsx("p",{className:"text-sm text-dashboard-muted",children:e.start_date&&e.end_date?`${e.start_date} ～ ${e.end_date}`:e.location})]}),(0,a.jsxs)(i.default,{href:"/login",className:"inline-flex items-center gap-1 text-sm font-bold text-agrix-forest hover:underline shrink-0",children:["申し込む ",a.jsx(x.Z,{className:"w-4 h-4"})]})]})})},e.id))})]})]})});if("farmer"!==t.role)return null;if(Z&&0===_.length&&t?.role==="farmer")return a.jsx("main",{className:"min-h-full flex items-center justify-center",children:a.jsx(L.Z,{message:"読み込み中..."})});let z={confirmed:"確定",pending:"確認待ち",completed:"完了",canceled:"キャンセル"};return a.jsx("main",{className:"min-h-full",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8",children:[t?.role==="farmer"&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-dashboard-text mb-4 flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-5 h-5 text-agrix-forest"}),"予約募集一覧"]}),0===_.length?a.jsx(y.Zb,{className:"mb-8",children:(0,a.jsxs)(y.aY,{className:"p-10 flex flex-col items-center justify-center text-center",children:[a.jsx("div",{className:"rounded-full bg-dashboard-muted/20 p-6 mb-4",children:a.jsx(m.Z,{className:"w-12 h-12 text-dashboard-muted"})}),a.jsx("p",{className:"font-bold text-dashboard-text mb-1",children:"現在募集中の案件はありません"}),a.jsx("p",{className:"text-sm text-dashboard-muted",children:"新しい案件が公開されるとここに表示されます。"})]})}):a.jsx("ul",{className:"space-y-4",children:_.map(e=>a.jsx("li",{children:a.jsx(U,{campaign:e,onSelect:e=>k(e),isSelected:P?.id===e.id})},e.id))})]}),t?.role==="farmer"&&P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[(0,a.jsxs)("p",{className:"text-dashboard-text font-bold text-sm",children:["申し込む案件: ",P.campaign_title||P.location]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-agrix-forest/10 text-agrix-forest px-3 py-1.5 rounded-lg border border-agrix-forest/30",children:[a.jsx("span",{className:"text-xs font-bold",children:"累計"}),(0,a.jsxs)("span",{className:"font-black",children:[(P.totalArea10r??0).toFixed(1)," 反"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10",children:[a.jsx("section",{className:"order-2 lg:order-1",children:(0,a.jsxs)(y.Zb,{className:"p-4 h-[500px] lg:h-[700px] relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-4 left-4 z-[1000] bg-dashboard-card/95 backdrop-blur px-4 py-2 rounded-xl shadow-md border border-dashboard-border flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-5 h-5 text-agrix-forest"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-sm font-bold text-dashboard-text",children:"圃場を描画"}),a.jsx("p",{className:"text-xs text-dashboard-muted",children:"地図上でクリックして圃場の範囲を指定"})]})]}),A>0&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 z-[1000] bg-agrix-forest text-white px-5 py-3 rounded-xl shadow-sm border-2 border-agrix-gold/50 min-w-[180px]",children:[a.jsx("div",{className:"text-xs font-bold uppercase tracking-wider mb-1 opacity-90",children:"選択面積"}),(0,a.jsxs)("div",{className:"text-2xl font-black",children:[A.toFixed(2)," ",a.jsx("span",{className:"text-sm font-normal opacity-90",children:"反"})]})]}),a.jsx("div",{className:"w-full h-full rounded-xl overflow-hidden absolute inset-0 p-4 pt-14",children:a.jsx(Y,{onPolygonComplete:(e,t,r)=>{D(e),C(t),M(r)},initialPolygon:E||void 0})})]})}),a.jsx("section",{className:"order-1 lg:order-2",children:a.jsx(y.Zb,{children:a.jsx(y.aY,{className:"p-6",children:a.jsx(T,{project:P,area10r:A,totalCampaignArea:q,onSubmit:W})})})})]})]}),(0,a.jsxs)("section",{id:"applications",className:"mb-8",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-dashboard-text mb-4 flex items-center gap-2",children:[a.jsx(p.Z,{className:"w-5 h-5 text-agrix-forest"}),"申込履歴"]}),a.jsx(y.Zb,{className:"overflow-hidden",children:0===O.length?(0,a.jsxs)(y.aY,{className:"p-10 flex flex-col items-center justify-center text-center",children:[a.jsx("div",{className:"rounded-full bg-dashboard-muted/20 p-6 mb-4",children:a.jsx(p.Z,{className:"w-12 h-12 text-dashboard-muted"})}),a.jsx("p",{className:"font-bold text-dashboard-text mb-1",children:"まだ申込がありません"}),a.jsx("p",{className:"text-sm text-dashboard-muted",children:"案件を選択して申し込むと、ここに履歴が表示されます。"})]}):a.jsx("ul",{className:"divide-y divide-dashboard-border",children:O.map(e=>a.jsx("li",{className:"p-4 flex flex-wrap items-center justify-between gap-2",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold text-dashboard-text",children:e.project?.campaign_title||e.project?.location||e.campaign_id}),(0,a.jsxs)("p",{className:"text-sm text-dashboard-muted",children:[e.area_10r," 反",null!=e.locked_price&&` \xb7 \xa5${(e.area_10r*e.locked_price).toLocaleString()}`," \xb7 ",z[e.status]||e.status,e.created_at&&` \xb7 ${new Date(e.created_at).toLocaleDateString("ja-JP")}`]})]})},e.id))})})]}),(0,a.jsxs)("section",{id:"my-field",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-dashboard-text mb-4 flex items-center gap-2",children:[a.jsx(f.Z,{className:"w-5 h-5 text-agrix-forest"}),"My畑管理"]}),a.jsx(y.Zb,{children:(0,a.jsxs)(y.aY,{className:"p-10 flex flex-col items-center justify-center text-center",children:[a.jsx("div",{className:"rounded-full bg-agrix-forest/10 p-6 mb-4",children:a.jsx(f.Z,{className:"w-12 h-12 text-agrix-forest"})}),a.jsx("p",{className:"font-bold text-dashboard-text mb-1",children:"圃場情報の登録・管理"}),a.jsx("p",{className:"text-sm text-dashboard-muted mb-4",children:"畑を登録すると、作業依頼や申込時に選択できます。"}),(0,a.jsxs)(i.default,{href:"/my-fields",className:"inline-flex items-center gap-2 bg-agrix-forest text-white px-5 py-2.5 rounded-xl font-bold text-sm hover:bg-agrix-forest-dark transition-colors",children:[a.jsx(f.Z,{className:"w-4 h-4"}),"マイ畑を管理する"]})]})})]}),(0,a.jsxs)("footer",{className:"mt-8 text-center text-sm text-dashboard-muted",children:[a.jsx("p",{children:"ご不明な点がございましたら、お気軽にお問い合わせください。"}),(0,a.jsxs)("p",{className:"mt-2",children:["\xa9 2026"," ",a.jsx("a",{href:"https://wayfinderworx.com/",target:"_blank",rel:"noopener noreferrer",className:"text-dashboard-text hover:text-agrix-forest underline underline-offset-2",children:"Wayfinder WorX"})]})]})]})})}},658:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(5344),s=r(2739),n=r(1453);function l({message:e="読み込み中...",className:t}){return(0,a.jsxs)("div",{className:(0,n.cn)("flex min-h-[40vh] flex-col items-center justify-center gap-4",t),children:[a.jsx(s.Z,{className:"h-12 w-12 text-agrix-forest animate-spin","aria-hidden":!0}),a.jsx("p",{className:"text-sm font-medium text-slate-600",children:e})]})}},5190:(e,t,r)=>{"use strict";r.d(t,{z:()=>x});var a,s,n=r(5344),l=r(3729),i=r(6815);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,d=i.W;var c=r(1453);let u=(a="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-bold tracking-tight transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:size-4 [&_svg]:shrink-0",s={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",accent:"bg-accent text-accent-foreground hover:bg-accent/80 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary bg-transparent text-primary hover:bg-primary/10",secondary:"bg-muted text-muted-foreground hover:bg-muted/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10","icon-sm":"h-8 w-8","icon-lg":"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==s?void 0:s.variants)==null)return d(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:n}=s,l=Object.keys(r).map(t=>{let a=null==e?void 0:e[t],s=null==n?void 0:n[t];if(null===a)return null;let l=o(a)||o(s);return r[t][l]}),i=e&&Object.entries(e).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return d(a,l,null==s?void 0:null===(t=s.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...i}[t]):({...n,...i})[t]===r})?[...e,r,a]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),x=l.forwardRef(({className:e,variant:t,size:r,...a},s)=>n.jsx("button",{className:(0,c.cn)(u({variant:t,size:r,className:e})),ref:s,...a}));x.displayName="Button"},8455:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>l});let a=(0,r(6843).createProxy)(String.raw`C:\Users\yusuk\Documents\wwx\Wayfinder AgriX\v3-app\src\app\(main)\page.tsx`),{__esModule:s,$$typeof:n}=a,l=a.default},1405:(e,t,r)=>{"use strict";r.d(t,{F:()=>n,e:()=>l});var a=r(3729);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let r=!1,a=e.map(e=>{let a=s(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():s(e[t],null)}}}}function l(...e){return a.useCallback(n(...e),e)}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,240,337,859,232,359,993,534],()=>r(1609));module.exports=a})();