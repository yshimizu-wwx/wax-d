(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{542:function(e,t,s){Promise.resolve().then(s.bind(s,3503))},8025:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2237:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]])},7307:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},9475:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},645:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]])},5423:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},8994:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},5310:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},5497:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},4059:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(5250),r=s.n(a)},3503:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var a=s(3827),r=s(4090),i=s(8792),l=s(5423),d=s(5497),n=s(8025),c=s(9475),o=s(4059),x=s(645),u=s(7461);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,u.Z)("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]),h=(0,u.Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),f=(0,u.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var b=s(7307),g=s(2237),p=s(5310),j=s(4697),v=s(8228),y=s(8793),N=s(4958),w=s(4656),k=s(407),_=s(6288),Z=s(5671),O=s(575);function M(){var e;let[t,s]=(0,r.useState)(null),[u,M]=(0,r.useState)(!0),[S,z]=(0,r.useState)(0),[C,I]=(0,r.useState)([]),[q,P]=(0,r.useState)(0),[A,U]=(0,r.useState)(0),[J,L]=(0,r.useState)({totalArea10r:0,currentUnitPrice:null}),[Y,E]=(0,r.useState)(0),[V,F]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(0,y.ts)().then(e=>{s(e),M(!1)})},[]),(0,r.useEffect)(()=>{t&&("admin"===t.role&&(N.O.from("users").select("id",{count:"exact",head:!0}).eq("status","pending").then(e=>{let{count:t}=e;return z(null!=t?t:0)}),N.O.from("campaigns").select("id",{count:"exact",head:!0}).eq("status","open").then(e=>{let{count:t}=e;return P(null!=t?t:0)})),"provider"===t.role&&N.O.from("campaigns").select("id, campaign_title, location, final_date, status, is_closed, base_price, min_price, target_area_10r, min_target_area_10r, max_target_area_10r, execution_price").eq("provider_id",t.id).in("status",["open","closed","applied"]).order("start_date",{ascending:!0}).limit(10).then(e=>{let{data:t}=e;if(!(null==t?void 0:t.length)){I([]),L({totalArea10r:0,currentUnitPrice:null});return}let s=t.map(e=>e.id);Promise.all([N.O.from("bookings").select("campaign_id, confirmed_date, area_10r").in("campaign_id",s).neq("status","canceled"),...s.map(e=>(0,w.x1)(e))]).then(e=>{let[a,...r]=e,i=a.data||[],l=new Map;i.forEach(e=>{let t=e.campaign_id,s=l.get(t)||{confirmed_date:"",count:0};s.count+=1,e.confirmed_date&&(s.confirmed_date=e.confirmed_date),l.set(t,s)}),I(t.map(e=>{var t,s;let a=l.get(e.id)||{confirmed_date:"",count:0};return{id:e.id,campaign_title:e.campaign_title||e.location||"案件",location:e.location||"",confirmed_date:a.confirmed_date,final_date:e.final_date||"",booking_count:a.count,status:null!==(t=e.status)&&void 0!==t?t:"",is_closed:null!==(s=e.is_closed)&&void 0!==s&&s}}).slice(0,5));let d=r.reduce((e,t)=>e+t,0),n=t.find(e=>!e.is_closed&&("open"===e.status||"applied"===e.status)),c=null;if(n&&n.id){var o,x,u,m;let e=s.indexOf(n.id),t=e>=0&&null!==(o=r[e])&&void 0!==o?o:0;c=(0,k.Bx)({base_price:n.base_price||0,min_price:n.min_price||0,target_area_10r:n.target_area_10r||0,min_target_area_10r:null!==(x=n.min_target_area_10r)&&void 0!==x?x:void 0,max_target_area_10r:null!==(u=n.max_target_area_10r)&&void 0!==u?u:void 0,execution_price:null!==(m=n.execution_price)&&void 0!==m?m:void 0},t).currentPrice}L({totalArea10r:d,currentUnitPrice:c})})}))},[t,A]),u)?(0,a.jsx)("main",{className:"min-h-full flex items-center justify-center",children:(0,a.jsx)(v.Z,{message:"読み込み中..."})}):t&&("admin"===t.role||"provider"===t.role)?"admin"===t.role?(0,a.jsx)("main",{className:"min-h-full",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 md:py-8",children:[(0,a.jsxs)("h1",{className:"text-xl md:text-2xl font-black text-dashboard-text flex items-center gap-2 mb-6",children:[(0,a.jsx)(l.Z,{className:"w-6 h-6 text-agrix-forest"}),"Platform Admin"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-6",children:[(0,a.jsx)(i.default,{href:"/admin/users",className:"block group",children:(0,a.jsxs)(Z.Zb,{className:"h-full transition-all hover:shadow-md hover:border-agrix-forest/30",children:[(0,a.jsxs)(Z.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-gold/20",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-agrix-gold"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Z.ll,{className:"text-base",children:"承認待ちユーザー"}),(0,a.jsx)(Z.SZ,{children:"未承認の申請"})]})]}),(0,a.jsx)(n.Z,{className:"w-5 h-5 text-dashboard-muted group-hover:text-agrix-forest transition-colors"})]}),(0,a.jsxs)(Z.aY,{children:[(0,a.jsx)("p",{className:"text-2xl md:text-3xl font-black text-dashboard-text tabular-nums",children:S}),(0,a.jsx)("span",{className:"text-sm text-dashboard-muted",children:"件"})]})]})}),(0,a.jsxs)(Z.Zb,{children:[(0,a.jsx)(Z.Ol,{className:"flex flex-row items-center justify-between pb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-forest/10",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-agrix-forest"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Z.ll,{className:"text-base",children:"募集中案件数"}),(0,a.jsx)(Z.SZ,{children:"オープンな案件"})]})]})}),(0,a.jsxs)(Z.aY,{children:[(0,a.jsx)("p",{className:"text-2xl md:text-3xl font-black text-dashboard-text tabular-nums",children:q}),(0,a.jsx)("span",{className:"text-sm text-dashboard-muted",children:"件"})]})]})]}),(0,a.jsxs)(Z.Zb,{children:[(0,a.jsxs)(Z.Ol,{className:"pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-agrix-forest"}),(0,a.jsx)(Z.ll,{className:"text-base",children:"クイックリンク"})]}),(0,a.jsx)(Z.SZ,{children:"管理メニューへすばやくアクセス"})]}),(0,a.jsx)(Z.aY,{children:(0,a.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:(0,a.jsx)("li",{children:(0,a.jsxs)(i.default,{href:"/admin/users",className:"flex items-center gap-3 p-4 rounded-xl border border-dashboard-border hover:bg-dashboard-bg hover:border-agrix-forest/20 transition-colors",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-agrix-gold shrink-0"}),(0,a.jsx)("span",{className:"font-bold text-dashboard-text",children:"ユーザー承認管理"})]})})})})]})]})}):(0,a.jsx)("main",{className:"min-h-full",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 md:py-8",children:[(0,a.jsxs)("h1",{className:"text-xl md:text-2xl font-black text-dashboard-text flex items-center gap-2 mb-6",children:[(0,a.jsx)(l.Z,{className:"w-6 h-6 text-agrix-forest"}),"ダッシュボード"]}),(0,a.jsxs)("section",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6 mb-6",children:[(0,a.jsxs)(Z.Zb,{children:[(0,a.jsx)(Z.Ol,{className:"flex flex-row items-start justify-between pb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-forest/10",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-agrix-forest"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Z.ll,{className:"text-base",children:"合計面積"}),(0,a.jsx)(Z.SZ,{children:"直近案件の申込合計"})]})]})}),(0,a.jsx)(Z.aY,{children:(0,a.jsxs)("p",{className:"text-2xl md:text-3xl font-black text-agrix-forest tabular-nums",children:[J.totalArea10r.toFixed(1),(0,a.jsx)("span",{className:"text-base font-medium text-dashboard-muted ml-1",children:"反"})]})})]}),(0,a.jsxs)(Z.Zb,{children:[(0,a.jsx)(Z.Ol,{className:"flex flex-row items-start justify-between pb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-gold/20",children:(0,a.jsx)(m,{className:"w-6 h-6 text-agrix-gold"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Z.ll,{className:"text-base",children:"現在の単価"}),(0,a.jsx)(Z.SZ,{children:"募集中案件の暫定単価"})]})]})}),(0,a.jsx)(Z.aY,{children:(0,a.jsx)("p",{className:"text-2xl md:text-3xl font-black tabular-nums",children:null!=J.currentUnitPrice?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-agrix-gold",children:["\xa5",J.currentUnitPrice.toLocaleString()]}),(0,a.jsx)("span",{className:"text-base font-medium text-dashboard-muted ml-1",children:"/10a"})]}):(0,a.jsx)("span",{className:"text-dashboard-muted font-medium text-xl",children:"—"})})})]})]}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsxs)("h2",{className:"text-base font-bold text-dashboard-text flex items-center gap-2 mb-4",children:[(0,a.jsx)(h,{className:"w-5 h-5 text-agrix-forest"}),"農家招待リンク"]}),(0,a.jsx)(Z.Zb,{children:(0,a.jsxs)(Z.aY,{className:"p-4",children:[(0,a.jsx)("p",{className:"text-sm text-dashboard-muted mb-3",children:"このリンクを農家に共有すると、新規登録時に貴社と自動で紐付きます（1農家あたり最大10業者まで）。"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("code",{className:"flex-1 min-w-0 text-xs md:text-sm bg-dashboard-bg border border-dashboard-border rounded-lg px-3 py-2 break-all",children:"".concat(window.location.origin,"/login?signup=1&provider_id=").concat(null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"")}),(0,a.jsxs)(O.z,{type:"button",size:"sm",variant:"secondary",className:"shrink-0",onClick:()=>{var e,s;let a="".concat(window.location.origin,"/login?signup=1&provider_id=").concat(null!==(s=null==t?void 0:t.id)&&void 0!==s?s:"");a&&(null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText)?(navigator.clipboard.writeText(a),_.toast.success("リンクをコピーしました")):_.toast.error("コピーに失敗しました")},children:[(0,a.jsx)(f,{className:"w-4 h-4 mr-1"})," コピー"]})]})]})})]}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsxs)("h2",{className:"text-base font-bold text-dashboard-text flex items-center gap-2 mb-4",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 text-agrix-forest"}),"直近の作業予定"]}),(0,a.jsx)(Z.Zb,{children:0===C.length?(0,a.jsxs)(Z.aY,{className:"p-10 flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("div",{className:"rounded-full bg-dashboard-muted/20 p-6 mb-4",children:(0,a.jsx)(g.Z,{className:"w-12 h-12 text-dashboard-muted"})}),(0,a.jsx)("p",{className:"font-bold text-dashboard-text mb-1",children:"現在予定はありません"}),(0,a.jsx)("p",{className:"text-sm text-dashboard-muted mb-6 max-w-sm",children:"新規案件を作成すると、ここに直近の作業予定が表示されます。"}),(0,a.jsxs)(i.default,{href:"/admin/campaigns/new",className:"inline-flex items-center gap-2 rounded-xl bg-agrix-forest text-white px-5 py-2.5 text-sm font-bold hover:bg-agrix-forest-dark transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"案件を作成"]})]}):(0,a.jsx)("ul",{className:"divide-y divide-dashboard-border",children:C.map(e=>(0,a.jsxs)("li",{className:"p-4 flex items-center justify-between gap-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-bold text-dashboard-text",children:e.campaign_title||e.location}),(0,a.jsxs)("p",{className:"text-sm text-dashboard-muted",children:[e.confirmed_date||e.final_date?new Date(e.confirmed_date||e.final_date).toLocaleDateString("ja-JP"):"日付未確定"," \xb7 ","申込 ",e.booking_count," 件",e.is_closed||"closed"===e.status?" \xb7 締切済":""]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[!e.is_closed&&("open"===e.status||"applied"===e.status)&&(0,a.jsx)("button",{type:"button",onClick:async()=>{let t=await (0,w.dm)(e.id);if(t.success)_.toast.success("募集を締め切りました"),U(e=>e+1);else{var s;_.toast.error(null!==(s=t.error)&&void 0!==s?s:"締切に失敗しました")}},className:"px-3 py-1.5 rounded-lg bg-agrix-gold/20 text-agrix-gold-dark text-sm font-bold hover:bg-agrix-gold/30 border border-agrix-gold/50",children:"募集締切"}),(0,a.jsxs)(i.default,{href:"/provider/calendar",className:"text-sm font-bold text-agrix-forest hover:underline flex items-center gap-1",children:["カレンダー ",(0,a.jsx)(n.Z,{className:"w-4 h-4"})]})]})]},e.id))})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-base font-bold text-dashboard-text flex items-center gap-2 mb-4",children:"メニュー"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[(0,a.jsxs)(i.default,{href:"/provider/projects",className:"flex items-center gap-4 p-4 rounded-2xl border border-dashboard-border bg-dashboard-card shadow-sm hover:shadow-md hover:border-agrix-forest/30 transition-all",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-forest/10",children:(0,a.jsx)(p.Z,{className:"w-6 h-6 text-agrix-forest"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-dashboard-text",children:"案件"}),(0,a.jsx)("p",{className:"text-sm text-dashboard-muted",children:"作成・募集・締切・確定"})]}),(0,a.jsx)(n.Z,{className:"w-5 h-5 text-dashboard-muted ml-auto"})]}),(0,a.jsxs)(i.default,{href:"/provider/tasks",className:"flex items-center gap-4 p-4 rounded-2xl border border-dashboard-border bg-dashboard-card shadow-sm hover:shadow-md hover:border-agrix-forest/30 transition-all",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-forest/10",children:(0,a.jsx)(b.Z,{className:"w-6 h-6 text-agrix-forest"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-dashboard-text",children:"作業"}),(0,a.jsx)("p",{className:"text-sm text-dashboard-muted",children:"予定・完了・実績報告"})]}),(0,a.jsx)(n.Z,{className:"w-5 h-5 text-dashboard-muted ml-auto"})]}),(0,a.jsxs)(i.default,{href:"/provider/billings",className:"flex items-center gap-4 p-4 rounded-2xl border border-dashboard-border bg-dashboard-card shadow-sm hover:shadow-md hover:border-agrix-forest/30 transition-all",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-gold/20",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-agrix-gold"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-dashboard-text",children:"請求"}),(0,a.jsx)("p",{className:"text-sm text-dashboard-muted",children:"請求管理・印刷"})]}),(0,a.jsx)(n.Z,{className:"w-5 h-5 text-dashboard-muted ml-auto"})]}),(0,a.jsxs)(i.default,{href:"/provider/settings",className:"flex items-center gap-4 p-4 rounded-2xl border border-dashboard-border bg-dashboard-card shadow-sm hover:shadow-md hover:border-agrix-forest/30 transition-all",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-dashboard-muted/20",children:(0,a.jsx)(j.Z,{className:"w-6 h-6 text-agrix-slate"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-dashboard-text",children:"設定"}),(0,a.jsx)("p",{className:"text-sm text-dashboard-muted",children:"農家・マスタ・自社情報"})]}),(0,a.jsx)(n.Z,{className:"w-5 h-5 text-dashboard-muted ml-auto"})]}),(0,a.jsxs)(i.default,{href:"/provider/calendar",className:"flex items-center gap-4 p-4 rounded-2xl border border-dashboard-border bg-dashboard-card shadow-sm hover:shadow-md hover:border-agrix-forest/30 transition-all",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-forest/10",children:(0,a.jsx)(g.Z,{className:"w-6 h-6 text-agrix-forest"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-dashboard-text",children:"カレンダー"}),(0,a.jsx)("p",{className:"text-sm text-dashboard-muted",children:"予定の確認"})]}),(0,a.jsx)(n.Z,{className:"w-5 h-5 text-dashboard-muted ml-auto"})]})]})]})]})}):(0,a.jsx)("main",{className:"min-h-full flex items-center justify-center p-4",children:(0,a.jsx)(Z.Zb,{children:(0,a.jsx)(Z.aY,{className:"p-8 text-center text-dashboard-muted",children:"この画面を利用する権限がありません。"})})})}},8228:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(3827),r=s(8994),i=s(2169);function l(e){let{message:t="読み込み中...",className:s}=e;return(0,a.jsxs)("div",{className:(0,i.cn)("flex min-h-[40vh] flex-col items-center justify-center gap-4",s),children:[(0,a.jsx)(r.Z,{className:"h-12 w-12 text-agrix-forest animate-spin","aria-hidden":!0}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:t})]})}},575:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var a=s(3827),r=s(4090),i=s(9769),l=s(2169);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-bold tracking-tight transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",accent:"bg-accent text-accent-foreground hover:bg-accent/80 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary bg-transparent text-primary hover:bg-primary/10",secondary:"bg-muted text-muted-foreground hover:bg-muted/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10","icon-sm":"h-8 w-8","icon-lg":"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),n=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,...n}=e;return(0,a.jsx)("button",{className:(0,l.cn)(d({variant:r,size:i,className:s})),ref:t,...n})});n.displayName="Button"},8793:function(e,t,s){"use strict";s.d(t,{Lj:function(){return l},gQ:function(){return d},ts:function(){return r},w7:function(){return i}});var a=s(4958);async function r(){try{var e,t,s,r,i,l,d,n,c,o;let{data:{session:x}}=await a.O.auth.getSession();if(!(null==x?void 0:null===(e=x.user)||void 0===e?void 0:e.email))return null;let{data:u,error:m}=await a.O.from("users").select("*").eq("email",x.user.email).single();if(m||!u)return null;return{id:u.id,email:null!==(t=u.email)&&void 0!==t?t:"",role:u.role,name:null!==(s=u.name)&&void 0!==s?s:"",phone:null!==(r=u.phone)&&void 0!==r?r:"",status:null!==(i=u.status)&&void 0!==i?i:"",address:null!==(l=u.address)&&void 0!==l?l:void 0,lat:null!==(d=u.lat)&&void 0!==d?d:void 0,lng:null!==(n=u.lng)&&void 0!==n?n:void 0,associated_provider_id:null!==(c=u.associated_provider_id)&&void 0!==c?c:void 0,invitation_code:null!==(o=u.invitation_code)&&void 0!==o?o:void 0}}catch(e){return console.error("Error getting current user:",e),null}}async function i(){await a.O.auth.signOut(),window.location.href="/login"}async function l(e){try{var t;let{data:{session:s}}=await a.O.auth.getSession();if(!(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.email))return{success:!1,error:"ログインしていません"};let{error:r}=await a.O.from("users").update({...void 0!==e.name&&{name:e.name},...void 0!==e.phone&&{phone:e.phone},...void 0!==e.address&&{address:e.address}}).eq("email",s.user.email);if(r)return{success:!1,error:r.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function d(e){try{let{error:t}=await a.O.auth.updateUser({password:e});if(t)return{success:!1,error:t.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}},4958:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(342).createBrowserClient)("https://ayvieorwnyxxfygbhzny.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5dmllb3J3bnl4eGZ5Z2Joem55Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4MjY1OTUsImV4cCI6MjA4NjQwMjU5NX0.-alPp1Cr1J2yoKcdaln4LMbOPjaGCb4wRjURGhibLPk")},2169:function(e,t,s){"use strict";s.d(t,{cn:function(){return i}});var a=s(3167),r=s(1367);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},9769:function(e,t,s){"use strict";s.d(t,{j:function(){return l}});var a=s(3167);let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,i=a.W,l=(e,t)=>s=>{var a;if((null==t?void 0:t.variants)==null)return i(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:d}=t,n=Object.keys(l).map(e=>{let t=null==s?void 0:s[e],a=null==d?void 0:d[e];if(null===t)return null;let i=r(t)||r(a);return l[e][i]}),c=s&&Object.entries(s).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{});return i(e,n,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:s,className:a,...r}=t;return Object.entries(r).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...d,...c}[t]):({...d,...c})[t]===s})?[...e,s,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},function(e){e.O(0,[866,128,150,250,288,11,281,971,69,744],function(){return e(e.s=542)}),_N_E=e.O()}]);