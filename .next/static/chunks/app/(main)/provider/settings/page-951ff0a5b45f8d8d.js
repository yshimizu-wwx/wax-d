(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{1452:function(e,r,t){Promise.resolve().then(t.bind(t,7350))},559:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},7805:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},645:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]])},4697:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9910:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8792:function(e,r,t){"use strict";t.d(r,{default:function(){return s.a}});var a=t(5250),s=t.n(a)},7907:function(e,r,t){"use strict";var a=t(5313);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},7350:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var a=t(3827),s=t(4090),n=t(7907),l=t(8792),i=t(9910),d=t(559),c=t(7805),o=t(4697),u=t(645),h=t(8793),f=t(5671);function m(){let e=(0,n.useRouter)(),[r,t]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(0,h.ts)().then(r=>{if(r&&"provider"!==r.role){e.replace("/login");return}t(null!=r?r:null),x(!1)})},[e]),m)?(0,a.jsx)("main",{className:"min-h-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-agrix-forest"})}):r?(0,a.jsx)("main",{className:"min-h-full",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6 md:py-8",children:[(0,a.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-dashboard-text flex items-center gap-2 mb-6",children:[(0,a.jsx)(i.Z,{className:"w-6 h-6 text-agrix-forest"}),"設定"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(l.default,{href:"/admin/users",className:"block",children:(0,a.jsx)(f.Zb,{className:"transition-all hover:shadow-md hover:border-agrix-forest/30",children:(0,a.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-agrix-gold/20",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-agrix-gold"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f.ll,{className:"text-base",children:"紐付き農家"}),(0,a.jsx)(f.SZ,{children:"自分に紐付いている農家の一覧・管理"})]})]}),(0,a.jsx)(c.Z,{className:"w-5 h-5 text-dashboard-muted shrink-0"})]})})}),(0,a.jsx)(l.default,{href:"/admin/masters",className:"block",children:(0,a.jsx)(f.Zb,{className:"transition-all hover:shadow-md hover:border-agrix-forest/30",children:(0,a.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-dashboard-muted/20",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-agrix-slate"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f.ll,{className:"text-base",children:"マスタ管理"}),(0,a.jsx)(f.SZ,{children:"品目・作業種別・作業内容・農薬などのマスタ"})]})]}),(0,a.jsx)(c.Z,{className:"w-5 h-5 text-dashboard-muted shrink-0"})]})})}),(0,a.jsxs)(f.Zb,{className:"opacity-90",children:[(0,a.jsx)(f.Ol,{className:"flex flex-row items-center justify-between pb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl bg-dashboard-muted/20",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 text-dashboard-muted"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f.ll,{className:"text-base",children:"自社情報"}),(0,a.jsx)(f.SZ,{children:"屋号・住所・インボイス番号など（準備中）"})]})]})}),(0,a.jsx)(f.aY,{children:(0,a.jsx)("p",{className:"text-sm text-dashboard-muted",children:"請求書発行に必要な自社情報の編集は、v0.2 で提供予定です。"})})]})]})]})}):null}},5671:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},ll:function(){return d}});var a=t(3827),s=t(4090),n=t(2169);let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm transition-all duration-200 hover:shadow-md",t),...s})});l.displayName="Card";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-lg font-bold leading-none tracking-tight text-card-foreground",t),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...s})});o.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},8793:function(e,r,t){"use strict";t.d(r,{Lj:function(){return l},gQ:function(){return i},ts:function(){return s},w7:function(){return n}});var a=t(4958);async function s(){try{var e,r,t,s,n,l,i,d,c,o;let{data:{session:u}}=await a.O.auth.getSession();if(!(null==u?void 0:null===(e=u.user)||void 0===e?void 0:e.email))return null;let{data:h,error:f}=await a.O.from("users").select("*").eq("email",u.user.email).single();if(f||!h)return null;return{id:h.id,email:null!==(r=h.email)&&void 0!==r?r:"",role:h.role,name:null!==(t=h.name)&&void 0!==t?t:"",phone:null!==(s=h.phone)&&void 0!==s?s:"",status:null!==(n=h.status)&&void 0!==n?n:"",address:null!==(l=h.address)&&void 0!==l?l:void 0,lat:null!==(i=h.lat)&&void 0!==i?i:void 0,lng:null!==(d=h.lng)&&void 0!==d?d:void 0,associated_provider_id:null!==(c=h.associated_provider_id)&&void 0!==c?c:void 0,invitation_code:null!==(o=h.invitation_code)&&void 0!==o?o:void 0}}catch(e){return console.error("Error getting current user:",e),null}}async function n(){await a.O.auth.signOut(),window.location.href="/login"}async function l(e){try{var r;let{data:{session:t}}=await a.O.auth.getSession();if(!(null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.email))return{success:!1,error:"ログインしていません"};let{error:s}=await a.O.from("users").update({...void 0!==e.name&&{name:e.name},...void 0!==e.phone&&{phone:e.phone},...void 0!==e.address&&{address:e.address}}).eq("email",t.user.email);if(s)return{success:!1,error:s.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function i(e){try{let{error:r}=await a.O.auth.updateUser({password:e});if(r)return{success:!1,error:r.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}},4958:function(e,r,t){"use strict";t.d(r,{O:function(){return a}});let a=(0,t(342).createBrowserClient)("https://ayvieorwnyxxfygbhzny.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5dmllb3J3bnl4eGZ5Z2Joem55Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4MjY1OTUsImV4cCI6MjA4NjQwMjU5NX0.-alPp1Cr1J2yoKcdaln4LMbOPjaGCb4wRjURGhibLPk")},2169:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var a=t(3167),s=t(1367);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}}},function(e){e.O(0,[128,150,250,971,69,744],function(){return e(e.s=1452)}),_N_E=e.O()}]);