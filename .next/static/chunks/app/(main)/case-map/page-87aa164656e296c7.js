(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{710:function(e,t,n){Promise.resolve().then(n.bind(n,9278))},7461:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4090),u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let n=(0,r.forwardRef)((n,a)=>{let{color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:f="",children:d,...m}=n;return(0,r.createElement)("svg",{ref:a,...u,width:o,height:o,stroke:i,strokeWidth:c?24*Number(l)/Number(o):l,className:["lucide","lucide-".concat(s(e)),f].join(" "),...m},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(d)?d:[d]])});return n.displayName="".concat(e),n}},8994:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(7461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4232:function(e,t,n){"use strict";n.d(t,{default:function(){return u.a}});var r=n(4930),u=n.n(r)},7907:function(e,t,n){"use strict";var r=n(5313);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},4930:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(6921);n(3827),n(4090);let u=r._(n(4795));function s(e,t){let n={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};return"function"==typeof e&&(n.loader=e),(0,u.default)({...n,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9721:function(e,t,n){"use strict";function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(9775)},4795:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let r=n(3827),u=n(4090),s=n(9721);function a(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},n=(0,u.lazy)(()=>t.loader().then(a)),o=t.loading;function l(e){let a=o?(0,r.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,r.jsx)(n,{...e}):(0,r.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(u.Suspense,{fallback:a,children:i})}return l.displayName="LoadableComponent",l}},9278:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(3827),u=n(4090),s=n(7907),a=n(4232),i=n(8793),o=n(8228);let l=(0,a.default)(()=>Promise.all([n.e(866),n.e(212),n.e(250),n.e(11),n.e(528),n.e(7)]).then(n.bind(n,9007)),{loadableGenerated:{webpack:()=>[9007]},ssr:!1,loading:()=>(0,r.jsx)("main",{className:"min-h-full flex items-center justify-center",children:(0,r.jsx)(o.Z,{message:"読み込み中..."})})});function c(){let e=(0,s.useRouter)(),[t,n]=(0,u.useState)(!0);return((0,u.useEffect)(()=>{(0,i.ts)().then(t=>{if(!t){e.replace("/login");return}if("farmer"!==t.role){e.replace("/");return}n(!1)})},[e]),t)?(0,r.jsx)("main",{className:"min-h-full flex items-center justify-center",children:(0,r.jsx)(o.Z,{message:"リダイレクト中..."})}):(0,r.jsx)(l,{})}},8228:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3827),u=n(8994),s=n(2169);function a(e){let{message:t="読み込み中...",className:n}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("flex min-h-[40vh] flex-col items-center justify-center gap-4",n),children:[(0,r.jsx)(u.Z,{className:"h-12 w-12 text-agrix-forest animate-spin","aria-hidden":!0}),(0,r.jsx)("p",{className:"text-sm font-medium text-slate-600",children:t})]})}},8793:function(e,t,n){"use strict";n.d(t,{Lj:function(){return a},gQ:function(){return i},ts:function(){return u},w7:function(){return s}});var r=n(4958);async function u(){try{let{data:{session:e}}=await r.O.auth.getSession();if(!e)return null;let{data:t,error:n}=await r.O.from("users").select("*").eq("email",e.user.email).single();if(n||!t)return null;return t}catch(e){return console.error("Error getting current user:",e),null}}async function s(){await r.O.auth.signOut(),window.location.href="/login"}async function a(e){try{var t;let{data:{session:n}}=await r.O.auth.getSession();if(!(null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.email))return{success:!1,error:"ログインしていません"};let{error:u}=await r.O.from("users").update({...void 0!==e.name&&{name:e.name},...void 0!==e.phone&&{phone:e.phone},...void 0!==e.address&&{address:e.address}}).eq("email",n.user.email);if(u)return{success:!1,error:u.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function i(e){try{let{error:t}=await r.O.auth.updateUser({password:e});if(t)return{success:!1,error:t.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}},4958:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});let r=(0,n(342).createBrowserClient)("https://ayvieorwnyxxfygbhzny.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5dmllb3J3bnl4eGZ5Z2Joem55Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4MjY1OTUsImV4cCI6MjA4NjQwMjU5NX0.-alPp1Cr1J2yoKcdaln4LMbOPjaGCb4wRjURGhibLPk")},2169:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var r=n(3167),u=n(1367);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,u.m6)((0,r.W)(t))}}},function(e){e.O(0,[342,150,971,69,744],function(){return e(e.s=710)}),_N_E=e.O()}]);