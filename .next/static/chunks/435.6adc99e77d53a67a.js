"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{1435:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var a=s(3827),r=s(4090),l=s(6288),d=s(407);function n(e){var t,s,n,i,c;let{project:o,area10r:x,totalCampaignArea:m,onSubmit:b}=e,[h,p]=(0,r.useState)({farmerName:"",phone:"",email:"",desiredStartDate:"",desiredEndDate:""}),[g,u]=(0,r.useState)(!1),[j,N]=(0,r.useState)({}),f={base_price:o.base_price||0,min_price:o.min_price||0,target_area_10r:o.target_area_10r||0,min_target_area_10r:null!==(t=o.min_target_area_10r)&&void 0!==t?t:void 0,max_target_area_10r:null!==(s=o.max_target_area_10r)&&void 0!==s?s:void 0,execution_price:null!==(n=o.execution_price)&&void 0!==n?n:void 0},v=(0,d.Bx)(f,m+x),_=null!==(c=null!==(i=v.currentPrice)&&void 0!==i?i:o.base_price)&&void 0!==c?c:0,w=(0,d.MR)(_,x),y=(0,d.km)(w),D=(e,t)=>{p(s=>({...s,[e]:t})),j[e]&&N(t=>({...t,[e]:void 0}))},k=()=>{let e={};return h.farmerName.trim()||(e.farmerName="農家名を入力してください"),h.phone.trim()?/^[\d-]+$/.test(h.phone)||(e.phone="有効な電話番号を入力してください"):e.phone="電話番号を入力してください",h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)||(e.email="有効なメールアドレスを入力してください"):e.email="メールアドレスを入力してください",h.desiredStartDate||(e.desiredStartDate="開始日を選択してください"),h.desiredEndDate||(e.desiredEndDate="終了日を選択してください"),h.desiredStartDate&&h.desiredEndDate&&h.desiredStartDate>h.desiredEndDate&&(e.desiredEndDate="終了日は開始日以降を選択してください"),N(e),0===Object.keys(e).length},S=async e=>{if(e.preventDefault(),k()){if(x<=0){l.toast.error("地図上で圃場を描画してください");return}u(!0);try{await b(h)}catch(e){console.error("Submission error:",e),l.toast.error("予約の送信に失敗しました。もう一度お試しください。")}finally{u(!1)}}};return(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-2xl border border-green-200",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-800 mb-2 flex items-center",children:[(0,a.jsx)("i",{className:"w-1 h-6 bg-green-500 rounded-full mr-3 block"}),o.campaign_title||o.title||"案件情報"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-slate-500 mb-1",children:"場所"}),(0,a.jsx)("div",{className:"font-bold text-slate-800",children:o.location})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-slate-500 mb-1",children:"作業期間"}),(0,a.jsx)("div",{className:"font-bold text-slate-800",children:o.start_date&&o.end_date?"".concat(o.start_date," 〜 ").concat(o.end_date):"未定"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide pb-2 border-b border-slate-200",children:"農家情報"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["農家名 ",(0,a.jsx)("span",{className:"text-red-600 text-xs ml-1",children:"必須"})]}),(0,a.jsx)("input",{type:"text",value:h.farmerName,onChange:e=>D("farmerName",e.target.value),placeholder:"例: 山田農園",className:"w-full p-4 bg-slate-50 rounded-xl border outline-none focus:ring-2 focus:ring-green-500 ".concat(j.farmerName?"border-red-500":"border-slate-200")}),j.farmerName&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:j.farmerName})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["電話番号 ",(0,a.jsx)("span",{className:"text-red-600 text-xs ml-1",children:"必須"})]}),(0,a.jsx)("input",{type:"tel",value:h.phone,onChange:e=>D("phone",e.target.value),placeholder:"例: 090-1234-5678",className:"w-full p-4 bg-slate-50 rounded-xl border outline-none focus:ring-2 focus:ring-green-500 ".concat(j.phone?"border-red-500":"border-slate-200")}),j.phone&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:j.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["メールアドレス ",(0,a.jsx)("span",{className:"text-red-600 text-xs ml-1",children:"必須"})]}),(0,a.jsx)("input",{type:"email",value:h.email,onChange:e=>D("email",e.target.value),placeholder:"例: yamada@example.com",className:"w-full p-4 bg-slate-50 rounded-xl border outline-none focus:ring-2 focus:ring-green-500 ".concat(j.email?"border-red-500":"border-slate-200")}),j.email&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:j.email})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide pb-2 border-b border-slate-200",children:"希望作業日"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["開始日 ",(0,a.jsx)("span",{className:"text-red-600 text-xs ml-1",children:"必須"})]}),(0,a.jsx)("input",{type:"date",value:h.desiredStartDate,onChange:e=>D("desiredStartDate",e.target.value),className:"w-full p-4 bg-slate-50 rounded-xl border outline-none focus:ring-2 focus:ring-green-500 ".concat(j.desiredStartDate?"border-red-500":"border-slate-200")}),j.desiredStartDate&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:j.desiredStartDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["終了日 ",(0,a.jsx)("span",{className:"text-red-600 text-xs ml-1",children:"必須"})]}),(0,a.jsx)("input",{type:"date",value:h.desiredEndDate,onChange:e=>D("desiredEndDate",e.target.value),className:"w-full p-4 bg-slate-50 rounded-xl border outline-none focus:ring-2 focus:ring-green-500 ".concat(j.desiredEndDate?"border-red-500":"border-slate-200")}),j.desiredEndDate&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:j.desiredEndDate})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-6 rounded-2xl border border-green-200",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide pb-2 border-b border-green-300 mb-4",children:"圃場面積"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-4xl font-black text-green-600",children:[x.toFixed(2)," ",(0,a.jsx)("span",{className:"text-lg font-normal text-green-500",children:"反 (10a)"})]}),0===x&&(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-2",children:"地図上で圃場を描画してください"})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900 rounded-2xl p-6 text-white space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wide pb-2 border-b border-slate-700",children:"現在の単価・料金"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-slate-400 text-sm font-bold uppercase tracking-wider mb-1",children:"現在の単価"}),(0,a.jsxs)("div",{className:"text-4xl font-black text-agrix-gold flex justify-center items-baseline gap-1 animate-price-pulse",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\xa5"}),null==_?void 0:_.toLocaleString(),(0,a.jsx)("span",{className:"text-sm font-normal text-slate-400 ml-1",children:"/ 10a"})]},_),v.isUnformed&&(0,a.jsx)("div",{className:"text-red-400 text-xs font-bold mt-2",children:"⚠️ 最低成立面積に達していません"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 border-t border-slate-700 pt-4 mt-4",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-slate-400 text-xs",children:"合計金額（税抜）"}),(0,a.jsxs)("div",{className:"font-bold text-lg",children:["\xa5",w.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-slate-400 text-xs",children:"合計金額（税込）"}),(0,a.jsxs)("div",{className:"font-bold text-xl text-yellow-400",children:["\xa5",y.amountInclusive.toLocaleString()]})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:g||x<=0,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-5 px-8 rounded-2xl hover:from-green-600 hover:to-green-700 disabled:from-slate-300 disabled:to-slate-400 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl text-lg",children:g?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"送信中..."]}):"予約する"})]})}}}]);