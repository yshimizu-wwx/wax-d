"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_src_components_PolygonMap_tsx",{

/***/ "(app-pages-browser)/./node_modules/leaflet-draw/dist/leaflet.draw.css":
/*!*********************************************************!*\
  !*** ./node_modules/leaflet-draw/dist/leaflet.draw.css ***!
  \*********************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"8c928340b2f6\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sZWFmbGV0LWRyYXcvZGlzdC9sZWFmbGV0LmRyYXcuY3NzIiwibWFwcGluZ3MiOiI7QUFBQSwrREFBZSxjQUFjO0FBQzdCLElBQUksSUFBVSxJQUFJLGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbGVhZmxldC1kcmF3L2Rpc3QvbGVhZmxldC5kcmF3LmNzcz9mOGFmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiOGM5MjgzNDBiMmY2XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/leaflet-draw/dist/leaflet.draw.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/leaflet/dist/leaflet.css":
/*!***********************************************!*\
  !*** ./node_modules/leaflet/dist/leaflet.css ***!
  \***********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"77246a79ea3b\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MiLCJtYXBwaW5ncyI6IjtBQUFBLCtEQUFlLGNBQWM7QUFDN0IsSUFBSSxJQUFVLElBQUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9sZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3M/ZDU5NyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjc3MjQ2YTc5ZWEzYlwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/leaflet/dist/leaflet.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/geo/geocode.ts":
/*!********************************!*\
  !*** ./src/lib/geo/geocode.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   geocodeAddress: function() { return /* binding */ geocodeAddress; }\n/* harmony export */ });\n/* harmony import */ var _lib_google_maps__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/google-maps */ \"(app-pages-browser)/./src/lib/google-maps.ts\");\n/**\n * 住所 → 緯度・経度のジオコーディング\n * - NEXT_PUBLIC_GOOGLE_MAPS_API_KEY が設定されていれば Google Geocoding API を優先\n * - 未設定時は OpenStreetMap Nominatim を使用\n * Nominatim 利用ポリシー: https://operations.osmfoundation.org/policies/nominatim/\n */ \nconst NOMINATIM_URL = \"https://nominatim.openstreetmap.org/search\";\nconst USER_AGENT = \"WayfinderAgriX/1.0 (Agricultural field mapping)\";\n/** 日本国内の住所と判断するか（日本語含む、または Japan/日本 が無い） */ function isLikelyJapaneseAddress(q) {\n    const s = q.trim();\n    if (/日本|Japan|にほん|ニホン/i.test(s)) return true;\n    // 都道府県・郡・町・村・市・区 などが含まれる、または非ASCII（日本語）が含まれる\n    if (/[一-龥ぁ-んァ-ン]/.test(s)) return true;\n    if (/県|府|都|道|郡|町|村|市|区|丁目|番地/.test(s)) return true;\n    return false;\n}\n/** クエリをNominatimでヒットしやすくする（日本に限定して補正） */ function normalizeQueryForJapan(q) {\n    const s = q.trim();\n    if (!isLikelyJapaneseAddress(s)) return s;\n    if (/日本|Japan/i.test(s)) return s;\n    return \"\".concat(s, \", Japan\");\n}\n/**\n * 住所文字列をジオコーディングし、緯度・経度を返す。\n * 見つからない場合は null。\n * Google API キーがあれば Google を優先（日本向け region=jp）。なければ Nominatim。\n */ async function geocodeAddress(address) {\n    const trimmed = address === null || address === void 0 ? void 0 : address.trim();\n    if (!trimmed) return null;\n    if (true) {\n        const googleResult = await (0,_lib_google_maps__WEBPACK_IMPORTED_MODULE_0__.geocodeWithGoogle)(trimmed);\n        if (googleResult) return {\n            lat: googleResult.lat,\n            lng: googleResult.lng,\n            displayName: googleResult.displayName\n        };\n    }\n    const query = normalizeQueryForJapan(trimmed);\n    const params = new URLSearchParams({\n        q: query,\n        format: \"json\",\n        limit: \"1\",\n        addressdetails: \"0\"\n    });\n    // 日本国内に限定して検索精度を上げる\n    params.set(\"countrycodes\", \"jp\");\n    const doRequest = async ()=>{\n        const res = await fetch(\"\".concat(NOMINATIM_URL, \"?\").concat(params.toString()), {\n            method: \"GET\",\n            headers: {\n                Accept: \"application/json\",\n                \"User-Agent\": USER_AGENT\n            }\n        });\n        if (!res.ok) return null;\n        const data = await res.json();\n        if (!Array.isArray(data) || data.length === 0) return null;\n        const first = data[0];\n        const lat = parseFloat(first.lat);\n        const lng = parseFloat(first.lon);\n        if (Number.isNaN(lat) || Number.isNaN(lng)) return null;\n        return {\n            lat,\n            lng,\n            displayName: first.display_name\n        };\n    };\n    let result = await doRequest();\n    // 補正クエリでヒットしなかった場合、元の文字列のみで再試行（countrycodes=jp は維持）\n    if (!result && query !== trimmed) {\n        params.set(\"q\", trimmed);\n        await new Promise((r)=>setTimeout(r, 1100)); // Nominatim 1req/sec を考慮\n        result = await doRequest();\n    }\n    // まだヒットしない場合：番地（数字-数字など）を除いた地域名で再検索（地図を少なくともその地域に移動）\n    if (!result && isLikelyJapaneseAddress(trimmed)) {\n        const withoutNumber = trimmed.replace(/\\s*[\\d０-９\\-－ー]+\\s*$/, \"\").trim();\n        if (withoutNumber && withoutNumber.length >= 2) {\n            params.set(\"q\", normalizeQueryForJapan(withoutNumber));\n            await new Promise((r)=>setTimeout(r, 1100));\n            result = await doRequest();\n        }\n    }\n    return result;\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ2VvL2dlb2NvZGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUVxRDtBQUV0RCxNQUFNQyxnQkFBZ0I7QUFDdEIsTUFBTUMsYUFBYTtBQVFuQiwwQ0FBMEMsR0FDMUMsU0FBU0Msd0JBQXdCQyxDQUFTO0lBQ3hDLE1BQU1DLElBQUlELEVBQUVFLElBQUk7SUFDaEIsSUFBSSxvQkFBb0JDLElBQUksQ0FBQ0YsSUFBSSxPQUFPO0lBQ3hDLDZDQUE2QztJQUM3QyxJQUFJLGNBQWNFLElBQUksQ0FBQ0YsSUFBSSxPQUFPO0lBQ2xDLElBQUksMEJBQTBCRSxJQUFJLENBQUNGLElBQUksT0FBTztJQUM5QyxPQUFPO0FBQ1Q7QUFFQSx1Q0FBdUMsR0FDdkMsU0FBU0csdUJBQXVCSixDQUFTO0lBQ3ZDLE1BQU1DLElBQUlELEVBQUVFLElBQUk7SUFDaEIsSUFBSSxDQUFDSCx3QkFBd0JFLElBQUksT0FBT0E7SUFDeEMsSUFBSSxZQUFZRSxJQUFJLENBQUNGLElBQUksT0FBT0E7SUFDaEMsT0FBTyxHQUFLLE9BQUZBLEdBQUU7QUFDZDtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlSSxlQUFlQyxPQUFlO0lBQ2xELE1BQU1DLFVBQVVELG9CQUFBQSw4QkFBQUEsUUFBU0osSUFBSTtJQUM3QixJQUFJLENBQUNLLFNBQVMsT0FBTztJQUVyQixJQUFJQyxJQUEyQyxFQUFFO1FBQy9DLE1BQU1HLGVBQWUsTUFBTWYsbUVBQWlCQSxDQUFDVztRQUM3QyxJQUFJSSxjQUFjLE9BQU87WUFBRUMsS0FBS0QsYUFBYUMsR0FBRztZQUFFQyxLQUFLRixhQUFhRSxHQUFHO1lBQUVDLGFBQWFILGFBQWFHLFdBQVc7UUFBQztJQUNqSDtJQUVBLE1BQU1DLFFBQVFYLHVCQUF1Qkc7SUFDckMsTUFBTVMsU0FBUyxJQUFJQyxnQkFBZ0I7UUFDakNqQixHQUFHZTtRQUNIRyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsZ0JBQWdCO0lBQ2xCO0lBQ0Esb0JBQW9CO0lBQ3BCSixPQUFPSyxHQUFHLENBQUMsZ0JBQWdCO0lBRTNCLE1BQU1DLFlBQVk7UUFDaEIsTUFBTUMsTUFBTSxNQUFNQyxNQUFNLEdBQW9CUixPQUFqQm5CLGVBQWMsS0FBcUIsT0FBbEJtQixPQUFPUyxRQUFRLEtBQU07WUFDL0RDLFFBQVE7WUFDUkMsU0FBUztnQkFDUEMsUUFBUTtnQkFDUixjQUFjOUI7WUFDaEI7UUFDRjtRQUNBLElBQUksQ0FBQ3lCLElBQUlNLEVBQUUsRUFBRSxPQUFPO1FBQ3BCLE1BQU1DLE9BQU8sTUFBTVAsSUFBSVEsSUFBSTtRQUMzQixJQUFJLENBQUNDLE1BQU1DLE9BQU8sQ0FBQ0gsU0FBU0EsS0FBS0ksTUFBTSxLQUFLLEdBQUcsT0FBTztRQUN0RCxNQUFNQyxRQUFRTCxJQUFJLENBQUMsRUFBRTtRQUNyQixNQUFNbEIsTUFBTXdCLFdBQVdELE1BQU12QixHQUFHO1FBQ2hDLE1BQU1DLE1BQU11QixXQUFXRCxNQUFNRSxHQUFHO1FBQ2hDLElBQUlDLE9BQU9DLEtBQUssQ0FBQzNCLFFBQVEwQixPQUFPQyxLQUFLLENBQUMxQixNQUFNLE9BQU87UUFDbkQsT0FBTztZQUNMRDtZQUNBQztZQUNBQyxhQUFhcUIsTUFBTUssWUFBWTtRQUNqQztJQUNGO0lBRUEsSUFBSUMsU0FBUyxNQUFNbkI7SUFDbkIsb0RBQW9EO0lBQ3BELElBQUksQ0FBQ21CLFVBQVUxQixVQUFVUixTQUFTO1FBQ2hDUyxPQUFPSyxHQUFHLENBQUMsS0FBS2Q7UUFDaEIsTUFBTSxJQUFJbUMsUUFBUSxDQUFDQyxJQUFNQyxXQUFXRCxHQUFHLFFBQVEseUJBQXlCO1FBQ3hFRixTQUFTLE1BQU1uQjtJQUNqQjtJQUNBLHFEQUFxRDtJQUNyRCxJQUFJLENBQUNtQixVQUFVMUMsd0JBQXdCUSxVQUFVO1FBQy9DLE1BQU1zQyxnQkFBZ0J0QyxRQUFRdUMsT0FBTyxDQUFDLHVCQUF1QixJQUFJNUMsSUFBSTtRQUNyRSxJQUFJMkMsaUJBQWlCQSxjQUFjWCxNQUFNLElBQUksR0FBRztZQUM5Q2xCLE9BQU9LLEdBQUcsQ0FBQyxLQUFLakIsdUJBQXVCeUM7WUFDdkMsTUFBTSxJQUFJSCxRQUFRLENBQUNDLElBQU1DLFdBQVdELEdBQUc7WUFDdkNGLFNBQVMsTUFBTW5CO1FBQ2pCO0lBQ0Y7SUFDQSxPQUFPbUI7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2dlby9nZW9jb2RlLnRzPzNjYjAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDkvY/miYAg4oaSIOe3r+W6puODu+e1jOW6puOBruOCuOOCquOCs+ODvOODh+OCo+ODs+OCsFxuICogLSBORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZIOOBjOioreWumuOBleOCjOOBpuOBhOOCjOOBsCBHb29nbGUgR2VvY29kaW5nIEFQSSDjgpLlhKrlhYhcbiAqIC0g5pyq6Kit5a6a5pmC44GvIE9wZW5TdHJlZXRNYXAgTm9taW5hdGltIOOCkuS9v+eUqFxuICogTm9taW5hdGltIOWIqeeUqOODneODquOCt+ODvDogaHR0cHM6Ly9vcGVyYXRpb25zLm9zbWZvdW5kYXRpb24ub3JnL3BvbGljaWVzL25vbWluYXRpbS9cbiAqL1xuXG5pbXBvcnQgeyBnZW9jb2RlV2l0aEdvb2dsZSB9IGZyb20gJ0AvbGliL2dvb2dsZS1tYXBzJztcblxuY29uc3QgTk9NSU5BVElNX1VSTCA9ICdodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2gnO1xuY29uc3QgVVNFUl9BR0VOVCA9ICdXYXlmaW5kZXJBZ3JpWC8xLjAgKEFncmljdWx0dXJhbCBmaWVsZCBtYXBwaW5nKSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VvY29kZVJlc3VsdCB7XG4gIGxhdDogbnVtYmVyO1xuICBsbmc6IG51bWJlcjtcbiAgZGlzcGxheU5hbWU/OiBzdHJpbmc7XG59XG5cbi8qKiDml6XmnKzlm73lhoXjga7kvY/miYDjgajliKTmlq3jgZnjgovjgYvvvIjml6XmnKzoqp7lkKvjgoDjgIHjgb7jgZ/jga8gSmFwYW4v5pel5pysIOOBjOeEoeOBhO+8iSAqL1xuZnVuY3Rpb24gaXNMaWtlbHlKYXBhbmVzZUFkZHJlc3MocTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHMgPSBxLnRyaW0oKTtcbiAgaWYgKC/ml6XmnKx8SmFwYW5844Gr44G744KTfOODi+ODm+ODsy9pLnRlc3QocykpIHJldHVybiB0cnVlO1xuICAvLyDpg73pgZPlupznnIzjg7vpg6Hjg7vnlLrjg7vmnZHjg7vluILjg7vljLog44Gq44Gp44GM5ZCr44G+44KM44KL44CB44G+44Gf44Gv6Z2eQVNDSUnvvIjml6XmnKzoqp7vvInjgYzlkKvjgb7jgozjgotcbiAgaWYgKC9b5LiALem+peOBgS3jgpPjgqEt44OzXS8udGVzdChzKSkgcmV0dXJuIHRydWU7XG4gIGlmICgv55yMfOW6nHzpg7186YGTfOmDoXznlLp85p2RfOW4gnzljLp85LiB55uufOeVquWcsC8udGVzdChzKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqIOOCr+OCqOODquOCkk5vbWluYXRpbeOBp+ODkuODg+ODiOOBl+OChOOBmeOBj+OBmeOCi++8iOaXpeacrOOBq+mZkOWumuOBl+OBpuijnOato++8iSAqL1xuZnVuY3Rpb24gbm9ybWFsaXplUXVlcnlGb3JKYXBhbihxOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzID0gcS50cmltKCk7XG4gIGlmICghaXNMaWtlbHlKYXBhbmVzZUFkZHJlc3MocykpIHJldHVybiBzO1xuICBpZiAoL+aXpeacrHxKYXBhbi9pLnRlc3QocykpIHJldHVybiBzO1xuICByZXR1cm4gYCR7c30sIEphcGFuYDtcbn1cblxuLyoqXG4gKiDkvY/miYDmloflrZfliJfjgpLjgrjjgqrjgrPjg7zjg4fjgqPjg7PjgrDjgZfjgIHnt6/luqbjg7vntYzluqbjgpLov5TjgZnjgIJcbiAqIOimi+OBpOOBi+OCieOBquOBhOWgtOWQiOOBryBudWxs44CCXG4gKiBHb29nbGUgQVBJIOOCreODvOOBjOOBguOCjOOBsCBHb29nbGUg44KS5YSq5YWI77yI5pel5pys5ZCR44GRIHJlZ2lvbj1qcO+8ieOAguOBquOBkeOCjOOBsCBOb21pbmF0aW3jgIJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlb2NvZGVBZGRyZXNzKGFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8R2VvY29kZVJlc3VsdCB8IG51bGw+IHtcbiAgY29uc3QgdHJpbW1lZCA9IGFkZHJlc3M/LnRyaW0oKTtcbiAgaWYgKCF0cmltbWVkKSByZXR1cm4gbnVsbDtcblxuICBpZiAocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX01BUFNfQVBJX0tFWSkge1xuICAgIGNvbnN0IGdvb2dsZVJlc3VsdCA9IGF3YWl0IGdlb2NvZGVXaXRoR29vZ2xlKHRyaW1tZWQpO1xuICAgIGlmIChnb29nbGVSZXN1bHQpIHJldHVybiB7IGxhdDogZ29vZ2xlUmVzdWx0LmxhdCwgbG5nOiBnb29nbGVSZXN1bHQubG5nLCBkaXNwbGF5TmFtZTogZ29vZ2xlUmVzdWx0LmRpc3BsYXlOYW1lIH07XG4gIH1cblxuICBjb25zdCBxdWVyeSA9IG5vcm1hbGl6ZVF1ZXJ5Rm9ySmFwYW4odHJpbW1lZCk7XG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgIHE6IHF1ZXJ5LFxuICAgIGZvcm1hdDogJ2pzb24nLFxuICAgIGxpbWl0OiAnMScsXG4gICAgYWRkcmVzc2RldGFpbHM6ICcwJyxcbiAgfSk7XG4gIC8vIOaXpeacrOWbveWGheOBq+mZkOWumuOBl+OBpuaknOe0oueyvuW6puOCkuS4iuOBkuOCi1xuICBwYXJhbXMuc2V0KCdjb3VudHJ5Y29kZXMnLCAnanAnKTtcblxuICBjb25zdCBkb1JlcXVlc3QgPSBhc3luYyAoKTogUHJvbWlzZTxHZW9jb2RlUmVzdWx0IHwgbnVsbD4gPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke05PTUlOQVRJTV9VUkx9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdVc2VyLUFnZW50JzogVVNFUl9BR0VOVCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKCFyZXMub2spIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgZmlyc3QgPSBkYXRhWzBdO1xuICAgIGNvbnN0IGxhdCA9IHBhcnNlRmxvYXQoZmlyc3QubGF0KTtcbiAgICBjb25zdCBsbmcgPSBwYXJzZUZsb2F0KGZpcnN0Lmxvbik7XG4gICAgaWYgKE51bWJlci5pc05hTihsYXQpIHx8IE51bWJlci5pc05hTihsbmcpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgbGF0LFxuICAgICAgbG5nLFxuICAgICAgZGlzcGxheU5hbWU6IGZpcnN0LmRpc3BsYXlfbmFtZSxcbiAgICB9O1xuICB9O1xuXG4gIGxldCByZXN1bHQgPSBhd2FpdCBkb1JlcXVlc3QoKTtcbiAgLy8g6KOc5q2j44Kv44Ko44Oq44Gn44OS44OD44OI44GX44Gq44GL44Gj44Gf5aC05ZCI44CB5YWD44Gu5paH5a2X5YiX44Gu44G/44Gn5YaN6Kmm6KGM77yIY291bnRyeWNvZGVzPWpwIOOBr+e2reaMge+8iVxuICBpZiAoIXJlc3VsdCAmJiBxdWVyeSAhPT0gdHJpbW1lZCkge1xuICAgIHBhcmFtcy5zZXQoJ3EnLCB0cmltbWVkKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCAxMTAwKSk7IC8vIE5vbWluYXRpbSAxcmVxL3NlYyDjgpLogIPmha5cbiAgICByZXN1bHQgPSBhd2FpdCBkb1JlcXVlc3QoKTtcbiAgfVxuICAvLyDjgb7jgaDjg5Ljg4Pjg4jjgZfjgarjgYTloLTlkIjvvJrnlarlnLDvvIjmlbDlrZct5pWw5a2X44Gq44Gp77yJ44KS6Zmk44GE44Gf5Zyw5Z+f5ZCN44Gn5YaN5qSc57Si77yI5Zyw5Zuz44KS5bCR44Gq44GP44Go44KC44Gd44Gu5Zyw5Z+f44Gr56e75YuV77yJXG4gIGlmICghcmVzdWx0ICYmIGlzTGlrZWx5SmFwYW5lc2VBZGRyZXNzKHRyaW1tZWQpKSB7XG4gICAgY29uc3Qgd2l0aG91dE51bWJlciA9IHRyaW1tZWQucmVwbGFjZSgvXFxzKltcXGTvvJAt77yZXFwt77yN44O8XStcXHMqJC8sICcnKS50cmltKCk7XG4gICAgaWYgKHdpdGhvdXROdW1iZXIgJiYgd2l0aG91dE51bWJlci5sZW5ndGggPj0gMikge1xuICAgICAgcGFyYW1zLnNldCgncScsIG5vcm1hbGl6ZVF1ZXJ5Rm9ySmFwYW4od2l0aG91dE51bWJlcikpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgMTEwMCkpO1xuICAgICAgcmVzdWx0ID0gYXdhaXQgZG9SZXF1ZXN0KCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG4iXSwibmFtZXMiOlsiZ2VvY29kZVdpdGhHb29nbGUiLCJOT01JTkFUSU1fVVJMIiwiVVNFUl9BR0VOVCIsImlzTGlrZWx5SmFwYW5lc2VBZGRyZXNzIiwicSIsInMiLCJ0cmltIiwidGVzdCIsIm5vcm1hbGl6ZVF1ZXJ5Rm9ySmFwYW4iLCJnZW9jb2RlQWRkcmVzcyIsImFkZHJlc3MiLCJ0cmltbWVkIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0dPT0dMRV9NQVBTX0FQSV9LRVkiLCJnb29nbGVSZXN1bHQiLCJsYXQiLCJsbmciLCJkaXNwbGF5TmFtZSIsInF1ZXJ5IiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiZm9ybWF0IiwibGltaXQiLCJhZGRyZXNzZGV0YWlscyIsInNldCIsImRvUmVxdWVzdCIsInJlcyIsImZldGNoIiwidG9TdHJpbmciLCJtZXRob2QiLCJoZWFkZXJzIiwiQWNjZXB0Iiwib2siLCJkYXRhIiwianNvbiIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImZpcnN0IiwicGFyc2VGbG9hdCIsImxvbiIsIk51bWJlciIsImlzTmFOIiwiZGlzcGxheV9uYW1lIiwicmVzdWx0IiwiUHJvbWlzZSIsInIiLCJzZXRUaW1lb3V0Iiwid2l0aG91dE51bWJlciIsInJlcGxhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/geo/geocode.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/google-maps.ts":
/*!********************************!*\
  !*** ./src/lib/google-maps.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   geocodeWithGoogle: function() { return /* binding */ geocodeWithGoogle; }\n/* harmony export */ });\n/**\n * Google Maps Geocoding API を用いた住所→座標変換\n * 環境変数 NEXT_PUBLIC_GOOGLE_MAPS_API_KEY が設定されている場合に利用可能\n */ const GEOCODE_URL = \"https://maps.googleapis.com/maps/api/geocode/json\";\n/**\n * Google Geocoding API で住所をジオコーディングする。\n * 日本国内に特化するため region=jp, language=ja を指定。\n * 複数結果の場合は先頭（関連度が高い）を使用する。\n */ async function geocodeWithGoogle(address) {\n    var _data_results, _first_geometry;\n    const key = \"AIzaSyAU72mFnbq_Pc3_RJDJXZ7SEUKkZMPL1Ug\";\n    if (!(key === null || key === void 0 ? void 0 : key.trim())) return null;\n    const trimmed = address === null || address === void 0 ? void 0 : address.trim();\n    if (!trimmed) return null;\n    const params = new URLSearchParams({\n        address: trimmed,\n        key,\n        region: \"jp\",\n        language: \"ja\"\n    });\n    const res = await fetch(\"\".concat(GEOCODE_URL, \"?\").concat(params.toString()));\n    if (!res.ok) return null;\n    const data = await res.json();\n    if (data.status !== \"OK\" && data.status !== \"ZERO_RESULTS\") return null;\n    if (!((_data_results = data.results) === null || _data_results === void 0 ? void 0 : _data_results.length)) return null;\n    const first = data.results[0];\n    const loc = (_first_geometry = first.geometry) === null || _first_geometry === void 0 ? void 0 : _first_geometry.location;\n    if (!loc || typeof loc.lat !== \"number\" || typeof loc.lng !== \"number\") return null;\n    return {\n        lat: loc.lat,\n        lng: loc.lng,\n        displayName: first.formatted_address\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZ29vZ2xlLW1hcHMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Q0FHQyxHQVFELE1BQU1BLGNBQWM7QUFFcEI7Ozs7Q0FJQyxHQUNNLGVBQWVDLGtCQUFrQkMsT0FBZTtRQW1CaERDLGVBR09DO0lBckJaLE1BQU1DLE1BQU1DLHlDQUEyQztJQUN2RCxJQUFJLEVBQUNELGdCQUFBQSwwQkFBQUEsSUFBS0ksSUFBSSxLQUFJLE9BQU87SUFFekIsTUFBTUMsVUFBVVIsb0JBQUFBLDhCQUFBQSxRQUFTTyxJQUFJO0lBQzdCLElBQUksQ0FBQ0MsU0FBUyxPQUFPO0lBRXJCLE1BQU1DLFNBQVMsSUFBSUMsZ0JBQWdCO1FBQ2pDVixTQUFTUTtRQUNUTDtRQUNBUSxRQUFRO1FBQ1JDLFVBQVU7SUFDWjtJQUVBLE1BQU1DLE1BQU0sTUFBTUMsTUFBTSxHQUFrQkwsT0FBZlgsYUFBWSxLQUFxQixPQUFsQlcsT0FBT00sUUFBUTtJQUN6RCxJQUFJLENBQUNGLElBQUlHLEVBQUUsRUFBRSxPQUFPO0lBRXBCLE1BQU1mLE9BQU8sTUFBTVksSUFBSUksSUFBSTtJQUMzQixJQUFJaEIsS0FBS2lCLE1BQU0sS0FBSyxRQUFRakIsS0FBS2lCLE1BQU0sS0FBSyxnQkFBZ0IsT0FBTztJQUNuRSxJQUFJLEdBQUNqQixnQkFBQUEsS0FBS2tCLE9BQU8sY0FBWmxCLG9DQUFBQSxjQUFjbUIsTUFBTSxHQUFFLE9BQU87SUFFbEMsTUFBTWxCLFFBQVFELEtBQUtrQixPQUFPLENBQUMsRUFBRTtJQUM3QixNQUFNRSxPQUFNbkIsa0JBQUFBLE1BQU1vQixRQUFRLGNBQWRwQixzQ0FBQUEsZ0JBQWdCcUIsUUFBUTtJQUNwQyxJQUFJLENBQUNGLE9BQU8sT0FBT0EsSUFBSUcsR0FBRyxLQUFLLFlBQVksT0FBT0gsSUFBSUksR0FBRyxLQUFLLFVBQVUsT0FBTztJQUUvRSxPQUFPO1FBQ0xELEtBQUtILElBQUlHLEdBQUc7UUFDWkMsS0FBS0osSUFBSUksR0FBRztRQUNaQyxhQUFheEIsTUFBTXlCLGlCQUFpQjtJQUN0QztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvZ29vZ2xlLW1hcHMudHM/MTFiZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdvb2dsZSBNYXBzIEdlb2NvZGluZyBBUEkg44KS55So44GE44Gf5L2P5omA4oaS5bqn5qiZ5aSJ5o+bXG4gKiDnkrDlooPlpInmlbAgTkVYVF9QVUJMSUNfR09PR0xFX01BUFNfQVBJX0tFWSDjgYzoqK3lrprjgZXjgozjgabjgYTjgovloLTlkIjjgavliKnnlKjlj6/og71cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEdlb2NvZGVSZXN1bHQge1xuICBsYXQ6IG51bWJlcjtcbiAgbG5nOiBudW1iZXI7XG4gIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xufVxuXG5jb25zdCBHRU9DT0RFX1VSTCA9ICdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uJztcblxuLyoqXG4gKiBHb29nbGUgR2VvY29kaW5nIEFQSSDjgafkvY/miYDjgpLjgrjjgqrjgrPjg7zjg4fjgqPjg7PjgrDjgZnjgovjgIJcbiAqIOaXpeacrOWbveWGheOBq+eJueWMluOBmeOCi+OBn+OCgSByZWdpb249anAsIGxhbmd1YWdlPWphIOOCkuaMh+WumuOAglxuICog6KSH5pWw57WQ5p6c44Gu5aC05ZCI44Gv5YWI6aCt77yI6Zai6YCj5bqm44GM6auY44GE77yJ44KS5L2/55So44GZ44KL44CCXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW9jb2RlV2l0aEdvb2dsZShhZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPEdlb2NvZGVSZXN1bHQgfCBudWxsPiB7XG4gIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9NQVBTX0FQSV9LRVk7XG4gIGlmICgha2V5Py50cmltKCkpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHRyaW1tZWQgPSBhZGRyZXNzPy50cmltKCk7XG4gIGlmICghdHJpbW1lZCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgYWRkcmVzczogdHJpbW1lZCxcbiAgICBrZXksXG4gICAgcmVnaW9uOiAnanAnLFxuICAgIGxhbmd1YWdlOiAnamEnLFxuICB9KTtcblxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtHRU9DT0RFX1VSTH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gKTtcbiAgaWYgKCFyZXMub2spIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICBpZiAoZGF0YS5zdGF0dXMgIT09ICdPSycgJiYgZGF0YS5zdGF0dXMgIT09ICdaRVJPX1JFU1VMVFMnKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFkYXRhLnJlc3VsdHM/Lmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgZmlyc3QgPSBkYXRhLnJlc3VsdHNbMF07XG4gIGNvbnN0IGxvYyA9IGZpcnN0Lmdlb21ldHJ5Py5sb2NhdGlvbjtcbiAgaWYgKCFsb2MgfHwgdHlwZW9mIGxvYy5sYXQgIT09ICdudW1iZXInIHx8IHR5cGVvZiBsb2MubG5nICE9PSAnbnVtYmVyJykgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIHtcbiAgICBsYXQ6IGxvYy5sYXQsXG4gICAgbG5nOiBsb2MubG5nLFxuICAgIGRpc3BsYXlOYW1lOiBmaXJzdC5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJHRU9DT0RFX1VSTCIsImdlb2NvZGVXaXRoR29vZ2xlIiwiYWRkcmVzcyIsImRhdGEiLCJmaXJzdCIsImtleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZIiwidHJpbSIsInRyaW1tZWQiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJyZWdpb24iLCJsYW5ndWFnZSIsInJlcyIsImZldGNoIiwidG9TdHJpbmciLCJvayIsImpzb24iLCJzdGF0dXMiLCJyZXN1bHRzIiwibGVuZ3RoIiwibG9jIiwiZ2VvbWV0cnkiLCJsb2NhdGlvbiIsImxhdCIsImxuZyIsImRpc3BsYXlOYW1lIiwiZm9ybWF0dGVkX2FkZHJlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/google-maps.ts\n"));

/***/ })

});