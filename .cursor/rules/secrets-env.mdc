---
description: シークレット・環境変数の扱い（漏洩防止）
alwaysApply: true
---

# シークレット・環境変数（漏洩防止）

## 絶対にやること

- **`.env` / `.env.local` / `.env.*.local` を Git にコミットしない。** 本物の API キー・パスワードは必ずこれらのファイルにのみ記載する。
- コミット前に `git status` で、上記のファイルがステージされていないことを確認する。含まれていたら `git reset HEAD .env.local` などで外す。
- `git add .` を使ったあとは、必ず `git status` で一覧を確認し、env ファイルが含まれていないか見る。

## 新しいシークレットを追加するとき

- 実際の値は **`.env.local` だけ** に書く。
- 変数名とプレースホルダーのみ **`.env.example`** に追記する（例: `NEXT_PUBLIC_XXX=your-xxx`）。本物の値は書かない。

## このリポジトリの前提

- `.gitignore` で `.env` / `.env.local` / `.env.*.local` を無視している。エージェントがコード変更を提案する際も、これらのファイルに本物のキーを書く提案はしない（ローカルでユーザーが手で設定する前提）。
- Supabase の Service Role / Secret key、Google API Key などはすべて環境変数で参照し、ソースコードにハードコードしない。
